<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>VMware安装MacOS虚拟机</title>
      <link href="/2025/11/06/%E4%BD%BF%E7%94%A8VMWare%E5%AE%89%E8%A3%85MacOS%E8%99%9A%E6%8B%9F%E6%9C%BA/"/>
      <url>/2025/11/06/%E4%BD%BF%E7%94%A8VMWare%E5%AE%89%E8%A3%85MacOS%E8%99%9A%E6%8B%9F%E6%9C%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="VMware安装MacOS虚拟机"><a href="#VMware安装MacOS虚拟机" class="headerlink" title="VMware安装MacOS虚拟机"></a>VMware安装MacOS虚拟机</h1><h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><h3 id="1-unlocker"><a href="#1-unlocker" class="headerlink" title="1. unlocker"></a>1. unlocker</h3><ul><li>作用：解锁 VMware Workstation 对创建 MacOS 的限制</li><li>项目地址：<a href="https://github.com/BDisp/unlocker#">unlocker</a></li><li>下载方法：在项目 release 处下载对应版本的压缩包</li></ul><h3 id="2-macOS-ISOs"><a href="#2-macOS-ISOs" class="headerlink" title="2. macOS-ISOs"></a>2. macOS-ISOs</h3><ul><li>作用：下载 MacOS 的 ISO镜像</li><li>项目地址：<a href="https://github.com/Pyenb/macOS-ISOs">macOS-ISOs</a></li><li>下载方法：在 <code>Download Links</code> 处下载所需要的版本</li><li>注意：下载完成后使用在 PowerShell 中使用以下命令查看 ISO 文件的哈希值与仓库中的进行对比</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Get-FileHash ./&quot;macOS Monterey 12.7.6_21H1320.iso&quot; -Algorithm MD5</span><br></pre></td></tr></table></figure><ul><li>此仓库中下载的 macOS Monterey 12.7.6_21H1320.iso 无法安装，报错“安装无法继续，因为安装器已损坏，重新下载安装器并再试一次”</li></ul><h3 id="3-gibMacOS（不适用-VM）"><a href="#3-gibMacOS（不适用-VM）" class="headerlink" title="3. gibMacOS（不适用 VM）"></a>3. gibMacOS（不适用 VM）</h3><ul><li>作用：从 Apple 下载 MacOS 组件</li><li>项目地址：<a href="https://github.com/corpnewt/gibMacOS#">gibMacOS</a></li><li>下载方法：克隆该仓库到本地</li><li>注意：用于制作启动盘，VMware 不适用</li></ul><h2 id="解锁"><a href="#解锁" class="headerlink" title="解锁"></a>解锁</h2><ol><li>解压下载好的 unlocker 压缩包</li><li>进入 unlocker 解压目录</li><li>以管理员身份运行以下脚本<ul><li>win-install.cmd - 安装 VMware 补丁</li><li>win-uninstall.cmd - 恢复 VMware</li><li>win-update - 获取最新的 MacOS 客户机工具</li></ul></li><li>验证：打开 VMware -&gt; 创建新的虚拟机 -&gt; 下一步 -&gt; 下一步，在选择客户机操作系统中可以看到 <code>Apple MacOS X</code> 选项，证明解锁工具安装成功</li></ol><h2 id="镜像版本的对比"><a href="#镜像版本的对比" class="headerlink" title="镜像版本的对比"></a>镜像版本的对比</h2><table><thead><tr><th>项目</th><th>Big Sur</th><th>Monterey</th><th>Ventura</th></tr></thead><tbody><tr><td>能否正常安装</td><td>极稳</td><td>稳定</td><td>可装但挑配置</td></tr><tr><td>对 vmx 参数依赖</td><td>低</td><td>中</td><td>高</td></tr><tr><td>对 CPU &#x2F; 内存要求</td><td>低</td><td>中</td><td>高</td></tr><tr><td>VMware Tools 支持</td><td>成熟</td><td>成熟</td><td>一般</td></tr></tbody></table><h2 id="制作启动盘（不适用-VM）"><a href="#制作启动盘（不适用-VM）" class="headerlink" title="制作启动盘（不适用 VM）"></a>制作启动盘（不适用 VM）</h2><ol><li>进入 <code>gibMacOS</code> 目录</li><li>双击 <code>gibMacOS</code> 进入命令行交互界面，会自动获取所有支持的 MacOS 版本</li><li>版本对比（推荐 Big Sur 或 Monterey)</li><li>在命令行输入需要下载版本最前端的编号开始下载镜像(~&#x2F;gibMacOS&#x2F;macOS Downloads&#x2F;publicrelease)</li><li>进入 <code>gibMacOS</code> 路径</li><li>以管理员方式运行 <code>MakeInstall.bat</code> 根据提示进行操作</li></ol><h2 id="创建虚拟机"><a href="#创建虚拟机" class="headerlink" title="创建虚拟机"></a>创建虚拟机</h2><ol><li>打开 VMware Workstation</li><li>选择创建新的虚拟机</li><li>选择 ISO 文件路径</li><li>在选择客户机 OS 页面选择 Apple Mac OS X，版本选择 macOS 12</li><li>设置虚拟机名称和存储路径</li><li>磁盘容量设置 40 GB 以上，选择拆分为多个文件方便迁移</li><li>硬件配置<ol><li>内存至少 4GB，建议 12 GB</li><li>处理器核心至少 2 核</li><li>网络适配器按需设置</li><li>显示器开启 3D 加速，显存至少 4GB</li></ol></li><li>开启虚拟机进行系统安装</li><li>选择磁盘工具<ol><li>VMware Virtual SATA Hard Drive Media 虚拟磁盘</li><li>抹掉</li><li>设置名称，格式 APFS，分区图 GUID 分区图</li><li>关闭磁盘工具</li></ol></li><li>选择安装 macOS Monterey -&gt; 安装</li><li>如果提示 “安装无法继续，因为安装器已损坏，重新下载安装器并再试一次”<ol><li>返回到安装页面</li><li>实用工具</li><li>终端</li><li>将日期调回接近该版本发布的时间 (macOS Monterey 发布的时间，例如 2022 年 12 月)</li><li>终端输入 date 122512452022</li><li>关闭终端</li><li>重新从第 10 步安装</li></ol></li><li>优化 VMware 中 MacOS 卡顿问题<ol><li>设置 -&gt; 辅助功能 -&gt; 显示-&gt; 降低透明度</li><li>设置 -&gt; 程序坞与菜单栏 -&gt; 最小化窗口时实用 -&gt; 缩放效果</li><li>设置 -&gt; 扩展 -&gt; 共享菜单 -&gt; 取消勾选所有可以取消勾选的选项</li></ol></li><li>打开 ssh 连接功能<ol><li>设置 -&gt; 共享 -&gt; 允许访问选择所有用户</li></ol></li></ol>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
          <category> 操作系统 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术 </tag>
            
            <tag> 操作系统 </tag>
            
            <tag> 虚拟机 </tag>
            
            <tag> MacOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用cloc工具统计代码量</title>
      <link href="/2025/09/15/%E4%BD%BF%E7%94%A8cloc%E5%B7%A5%E5%85%B7%E7%BB%9F%E8%AE%A1%E4%BB%A3%E7%A0%81%E9%87%8F/"/>
      <url>/2025/09/15/%E4%BD%BF%E7%94%A8cloc%E5%B7%A5%E5%85%B7%E7%BB%9F%E8%AE%A1%E4%BB%A3%E7%A0%81%E9%87%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="使用cloc工具统计代码量"><a href="#使用cloc工具统计代码量" class="headerlink" title="使用cloc工具统计代码量"></a>使用cloc工具统计代码量</h1><p>跨平台代码量统计工具</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><ul><li>Windows</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">winget install AlDanial.cloc</span><br></pre></td></tr></table></figure><p>or</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">choco install cloc</span><br></pre></td></tr></table></figure><ul><li>Linux</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install cloc       # Debian/Ubuntu</span><br></pre></td></tr></table></figure><h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><p>在项目根目录下运行以下命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cloc .</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术 </tag>
            
            <tag> 工具 </tag>
            
            <tag> cloc </tag>
            
            <tag> 编程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WSL安装与使用</title>
      <link href="/2025/08/05/WSL%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"/>
      <url>/2025/08/05/WSL%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="WSL安装与使用"><a href="#WSL安装与使用" class="headerlink" title="WSL安装与使用"></a>WSL安装与使用</h1><h2 id="一、安装"><a href="#一、安装" class="headerlink" title="一、安装"></a>一、安装</h2><p>执行以下命令进行默认安装（默认为 ubuntu）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --install</span><br></pre></td></tr></table></figure><p>查看在线分发列表</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --list --online</span><br></pre></td></tr></table></figure><p>更改安装的分发版本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wsl --install [Distro]</span><br><span class="line"></span><br><span class="line">或</span><br><span class="line"></span><br><span class="line">wsl --install -d &lt;DistroName&gt;</span><br></pre></td></tr></table></figure><p>安装完成后按提示输入用户名和密码</p><h2 id="二、WSL迁移"><a href="#二、WSL迁移" class="headerlink" title="二、WSL迁移"></a>二、WSL迁移</h2><p>默认的 wsl 路径在 C:\Users&lt;用户名&gt;\AppData\Local\Packages，会导致 C盘空间紧张。</p><p>以下是 wsl 迁移步骤</p><ol><li>查看现有发行版</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --list --verbose</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">  NAME      STATE           VERSION</span><br><span class="line">* Ubuntu    Running         2</span><br></pre></td></tr></table></figure><p>Name 下的发行版名字即为迁移时所需要的</p><ol start="2"><li>导出当前系统</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --export Ubuntu H:\wsl-backup\ubuntu.tar</span><br></pre></td></tr></table></figure><p>导出前确保 H:\wsl-backup\ 目录已经存在</p><ol start="3"><li>注销原发行版</li></ol><p>导出完成后，可以删除（注销）原来的 Ubuntu，以释放 C 盘空间</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --unregister Ubuntu</span><br></pre></td></tr></table></figure><ol start="4"><li>导入到 H 盘</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir H:\wsl-ubuntu</span><br></pre></td></tr></table></figure><p>然后导入：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wsl --import &lt;发行版名称&gt; &lt;安装路径&gt; &lt;备份文件路径&gt; [选项]</span><br><span class="line"></span><br><span class="line">wsl --import Ubuntu H:\wsl-ubuntu H:\wsl-backup\ubuntu.tar --verison 2</span><br></pre></td></tr></table></figure><ol start="5"><li>设置默认用户（可选）</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ubuntu config --default-user &lt;username&gt;</span><br></pre></td></tr></table></figure><h2 id="三、安装-docker-desktop"><a href="#三、安装-docker-desktop" class="headerlink" title="三、安装 docker desktop"></a>三、安装 docker desktop</h2><p>下载安装 docker desktop 即可安装 docker， 无需单独安装 docker</p><h2 id="四、安装-vscode-插件"><a href="#四、安装-vscode-插件" class="headerlink" title="四、安装 vscode 插件"></a>四、安装 vscode 插件</h2><ul><li>WSL</li><li>Dev Container</li><li>Docker</li></ul><h2 id="五、WSL-关机"><a href="#五、WSL-关机" class="headerlink" title="五、WSL 关机"></a>五、WSL 关机</h2><p>关机</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --shutdown</span><br></pre></td></tr></table></figure><p>查看状态</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --status</span><br></pre></td></tr></table></figure><p>(wsl 没有使用时会自动关闭，有终端打开 wsl 时自动启动)</p><h2 id="六、docker-的-vhdx-迁移"><a href="#六、docker-的-vhdx-迁移" class="headerlink" title="六、docker 的 vhdx 迁移"></a>六、docker 的 vhdx 迁移</h2><ol><li>关闭 Docker 和 WSL</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wsl --shutdown</span><br><span class="line"></span><br><span class="line">taskkill /F /IM &quot;Docker Desktop.exe&quot;</span><br></pre></td></tr></table></figure><ol start="2"><li>创建新存放目录</li></ol><p>在 H 盘上创建目标路径</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">H:\wsl-docker\disk\</span><br><span class="line">H:\wsl-docker\main\</span><br></pre></td></tr></table></figure><ol start="3"><li>复制 vhdx 文件</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Copy-Item &quot;C:\Users\37504\AppData\Local\Docker\wsl\disk\docker_data.vhdx&quot; &quot;H:\wsl-docker\disk\&quot;</span><br><span class="line"></span><br><span class="line">Copy-Item &quot;C:\Users\37504\AppData\Local\Docker\wsl\main\ext4.vhdx&quot; &quot;H:\wsl-docker\main\&quot;</span><br></pre></td></tr></table></figure><ol start="4"><li>删除原文件</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Remove-Item &quot;C:\Users\37504\AppData\Local\Docker\wsl\disk\docker_data.vhdx&quot;</span><br><span class="line"></span><br><span class="line">Remove-Item &quot;C:\Users\37504\AppData\Local\Docker\wsl\main\ext4.vhdx&quot;</span><br></pre></td></tr></table></figure><ol start="5"><li>建立符号链接</li></ol><p>在管理员 PowerShell 中，用 mklink 建立连接，让系统以为文件还在 C 盘</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cmd /c mklink &quot;C:\Users\37504\AppData\Local\Docker\wsl\disk\docker_data.vhdx&quot; &quot;H:\wsl-docker\disk\docker_data.vhdx&quot;</span><br><span class="line"></span><br><span class="line">cmd /c mklink &quot;C:\Users\37504\AppData\Local\Docker\wsl\main\ext4.vhdx&quot; &quot;H:\wsl-docker\main\ext4.vhdx&quot;</span><br></pre></td></tr></table></figure><ol start="6"><li>重启 Docker Desktop</li></ol><p>重启完验证 Docker Desktop 以及 Docker 功能是否正常</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker run hello-world</span><br><span class="line"></span><br><span class="line">docker ps -a</span><br><span class="line"></span><br><span class="line">docker images</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术 </tag>
            
            <tag> WSL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VPN 搭建</title>
      <link href="/2025/07/08/VPN%E6%90%AD%E5%BB%BA/"/>
      <url>/2025/07/08/VPN%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="VPN-搭建"><a href="#VPN-搭建" class="headerlink" title="VPN 搭建"></a>VPN 搭建</h1><h2 id="VPN-与-内网穿透对比"><a href="#VPN-与-内网穿透对比" class="headerlink" title="VPN 与 内网穿透对比"></a>VPN 与 内网穿透对比</h2><p><strong>OpenVPN</strong> 和 <strong>WireGuard</strong> 都是非常流行的 VPN 协议，它们各有优缺点，适用于不同的场景。下面我将从多个方面比较这两者，以帮助你决定哪个更适合你的需求。</p><h3 id="1-性能"><a href="#1-性能" class="headerlink" title="1. 性能"></a>1. <strong>性能</strong></h3><ul><li><strong>WireGuard</strong>：WireGuard 在性能方面的表现非常优秀。它的设计简洁且高效，相比 OpenVPN 和其他传统 VPN 协议，WireGuard 提供更低的延迟和更高的吞吐量。由于 WireGuard 使用了现代加密算法（如 Curve25519、ChaCha20 和 Poly1305），它在 CPU 消耗方面比 OpenVPN 更轻，尤其是在移动设备上。</li><li><strong>OpenVPN</strong>：OpenVPN 的性能相对较低，特别是当使用 AES 加密时，它可能会占用更多的 CPU 资源。虽然 OpenVPN 的加密方式非常强大，但由于其较为复杂的架构，可能会带来一定的性能损耗。</li></ul><p><strong>总结</strong>：如果性能是最重要的考虑因素，WireGuard 无疑是更好的选择，尤其是在资源受限的设备（如手机或嵌入式设备）上表现更佳。</p><h3 id="2-安全性"><a href="#2-安全性" class="headerlink" title="2. 安全性"></a>2. <strong>安全性</strong></h3><ul><li><strong>WireGuard</strong>：WireGuard 在设计时就注重安全性，它使用了现代、经过审核的加密算法（如 Curve25519、ChaCha20、Poly1305 和 BLAKE2），这些算法相较于 OpenVPN 使用的 AES 等传统算法更为高效且安全。WireGuard 的代码非常简洁，只有大约 4000 行代码，相比之下，OpenVPN 的代码库要大得多，这使得 WireGuard 更易于审核和发现潜在的安全问题。</li><li><strong>OpenVPN</strong>：OpenVPN 使用 SSL&#x2F;TLS 协议进行加密，支持多种加密算法（如 AES、Blowfish 等）。它在安全性方面非常强大，且已经被广泛使用和审计。由于其较复杂的代码和配置选项，OpenVPN 可能会有更多的潜在配置错误或漏洞。</li></ul><p><strong>总结</strong>：从现代加密算法和简洁性来看，WireGuard 在安全性上有一定的优势。OpenVPN 依旧是一个非常安全的选择，尤其是在需要兼容性和灵活配置的场景中。</p><h3 id="3-配置和易用性"><a href="#3-配置和易用性" class="headerlink" title="3. 配置和易用性"></a>3. <strong>配置和易用性</strong></h3><ul><li><strong>WireGuard</strong>：WireGuard 的配置非常简单和直观。它只需要很少的参数来建立连接，并且没有那么复杂的配置选项。WireGuard 默认的配置文件结构也比 OpenVPN 更加简单，适合快速部署。</li><li><strong>OpenVPN</strong>：OpenVPN 的配置较为复杂，尤其是在高级选项（如证书管理、加密设置、路由设置等）上，需要更多的配置和调优。它支持更多的配置选项，这使得 OpenVPN 更加灵活，但也意味着更高的学习曲线。</li></ul><p><strong>总结</strong>：如果你是新手或需要快速部署，WireGuard 的配置更简洁，易于上手。而 OpenVPN 则适合那些需要高度自定义或灵活性的场景。</p><h3 id="4-兼容性和平台支持"><a href="#4-兼容性和平台支持" class="headerlink" title="4. 兼容性和平台支持"></a>4. <strong>兼容性和平台支持</strong></h3><ul><li><strong>WireGuard</strong>：WireGuard 在各大平台（Linux、Windows、macOS、Android、iOS 等）上都有广泛支持，且作为内核模块嵌入到 Linux 中后，性能表现非常优异。WireGuard 的客户端配置简单，很多操作系统已经内置了 WireGuard 客户端支持。</li><li><strong>OpenVPN</strong>：OpenVPN 在兼容性上几乎无敌，它支持几乎所有的操作系统、路由器和设备。它也可以通过各种方式进行配置和使用，例如 OpenVPN GUI、Tunnelblick 等工具。由于 OpenVPN 存在了很长时间，因此大部分硬件和软件环境都支持它。</li></ul><p><strong>总结</strong>：如果你需要广泛的兼容性（例如，某些嵌入式设备或老旧的路由器），OpenVPN 是更好的选择。WireGuard 的兼容性也非常好，但相对较新，某些老旧设备可能需要额外的支持。</p><h3 id="5-稳定性和维护"><a href="#5-稳定性和维护" class="headerlink" title="5. 稳定性和维护"></a>5. <strong>稳定性和维护</strong></h3><ul><li><strong>WireGuard</strong>：WireGuard 的代码库相对较小，因此更容易进行维护和审计。它已经经过了广泛的安全审核，并且有着非常活跃的开发社区。由于 WireGuard 的设计更简单，它通常更加稳定且易于修复漏洞。</li><li><strong>OpenVPN</strong>：OpenVPN 的代码库庞大且复杂，尽管它非常稳定且经过了多年的测试和使用，但其复杂性也带来了更多的潜在问题和维护挑战。它在新版本的发布和修复上相对较慢。</li></ul><p><strong>总结</strong>：WireGuard 在维护和稳定性方面更具优势，尤其是在小规模的部署中。OpenVPN 由于其庞大的社区和长期的使用历史，稳定性同样非常强，但它可能存在更多的配置和维护挑战。</p><h3 id="6-支持的功能"><a href="#6-支持的功能" class="headerlink" title="6. 支持的功能"></a>6. <strong>支持的功能</strong></h3><ul><li><strong>WireGuard</strong>：WireGuard 是一个相对简单的 VPN 协议，设计目标是提供一个简单、快速且安全的 VPN 连接。它支持基本的 VPN 功能，如点对点加密、路由、NAT 穿透等，但它不提供 OpenVPN 那样的高级功能（如 TCP、UDP 支持、压缩、动态路由等）。</li><li><strong>OpenVPN</strong>：OpenVPN 是一个功能强大的 VPN 协议，支持多种加密方式、身份验证方法（证书、用户名&#x2F;密码等）、路由控制、NAT 穿透、压缩等高级功能。它的灵活性使得它可以适应各种复杂的 VPN 架构和需求。</li></ul><p><strong>总结</strong>：如果你需要更高级的功能和灵活性，OpenVPN 是更好的选择；如果你的需求比较简单且关注速度，WireGuard 足以满足大部分需求。</p><h3 id="7-资源消耗"><a href="#7-资源消耗" class="headerlink" title="7. 资源消耗"></a>7. <strong>资源消耗</strong></h3><ul><li><strong>WireGuard</strong>：WireGuard 使用较少的 CPU 和内存资源，因为它的加密算法和协议设计较为简洁，因此非常适合资源有限的环境（如路由器、物联网设备等）。</li><li><strong>OpenVPN</strong>：OpenVPN 由于其相对复杂的架构和加密算法，相比 WireGuard 会消耗更多的资源。</li></ul><p><strong>总结</strong>：在资源消耗方面，WireGuard 占用更少的 CPU 和内存资源，适合资源有限的设备。</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a><strong>总结</strong></h3><ul><li><strong>选择 WireGuard</strong>：<ul><li>如果你对性能、简洁性和现代加密有较高要求。</li><li>如果你希望搭建一个资源消耗小且速度快的 VPN，尤其是在移动设备上。</li><li>如果你需要一个易于配置和维护的 VPN。</li></ul></li><li><strong>选择 OpenVPN</strong>：<ul><li>如果你需要更高的兼容性，尤其是在一些特殊的环境或老旧设备中。</li><li>如果你需要更复杂的功能或更强的灵活性（例如多协议支持、证书管理等）。</li><li>如果你在长期稳定性和社区支持上有较高要求。</li></ul></li></ul><h2 id="WireGuard-搭建步骤"><a href="#WireGuard-搭建步骤" class="headerlink" title="WireGuard 搭建步骤"></a>WireGuard 搭建步骤</h2><h3 id="1-安装"><a href="#1-安装" class="headerlink" title="1. 安装"></a>1. 安装</h3><p>分别在云服务器与客户端设备上安装 WireGuard</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt updrade -y</span><br><span class="line">sudo apt install wireguard</span><br><span class="line">wg --version</span><br></pre></td></tr></table></figure><h3 id="2-生成密钥对"><a href="#2-生成密钥对" class="headerlink" title="2. 生成密钥对"></a>2. 生成密钥对</h3><p>WireGuard 使用公钥加密，每个节点（服务器和客户端）都需要一对密钥来建立加密通道。</p><p>分别在服务器和客户端上执行以下命令生成密钥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir wireguard</span><br><span class="line">cd wireguard</span><br><span class="line">wg genkey | tee privatekey | wg pubkey &gt; publickey</span><br></pre></td></tr></table></figure><p><code>privatekey</code> 文件存储私钥，<code>publickey</code> 文件存储公钥。</p><h3 id="3-配置-WireGuard-服务器"><a href="#3-配置-WireGuard-服务器" class="headerlink" title="3. 配置 WireGuard 服务器"></a>3. 配置 WireGuard 服务器</h3><ol><li>创建 WireGuard 配置文件</li></ol><p>在服务器上创建 <code>/etc/wireguard/wg0.conf</code> 配置文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo touch /etc/wireguard/wg0.conf</span><br><span class="line">sudo nano /etc/wireguard/wg0.conf</span><br></pre></td></tr></table></figure><ol start="2"><li>配置内容</li></ol><p>将以下配置写入 <code>wg0.conf</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[Interface]</span><br><span class="line">Address = 10.0.0.1/24  # 服务器的虚拟IP地址</span><br><span class="line">PrivateKey = &lt;server-private-key&gt;  # 填入服务器的私钥</span><br><span class="line">ListenPort = 51820</span><br><span class="line"></span><br><span class="line">[Peer]</span><br><span class="line">PublicKey = &lt;client-public-key&gt;  # 填入客户端的公钥</span><br><span class="line">AllowedIPs = 10.0.0.2/32  # 客户端的虚拟IP地址</span><br></pre></td></tr></table></figure><p><strong>虚拟IP地址</strong> 需要在 <strong>同一子网内</strong>，并且不能与其他设备的 IP 地址冲突。</p><p><code>/24</code> 表示子网掩码有 <strong>24 个 1</strong>，即子网掩码是 <code>255.255.255.0</code></p><p><strong><code>/32</code></strong> 表示一个 <strong>单一的 IP 地址</strong>，没有子网范围</p><ol start="3"><li>启用 IP 转发</li></ol><p>编辑 <code>/etc/sysctl.conf</code> 文件以启用 IP 转发</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/sysctl.conf</span><br></pre></td></tr></table></figure><p>找到并取消注释以下行（如果没有可以手动添加）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net.ipv4.ip_forward = 1</span><br></pre></td></tr></table></figure><p>应用更改</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sysctl -p</span><br></pre></td></tr></table></figure><ol start="4"><li>配置防火墙（NAT 转发）</li></ol><p>配置 <code>iptables</code> 以允许 VPN 流量</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw allow 51820/udp # 允许 WireGuard 默认端口</span><br><span class="line">sudo ufw enable</span><br></pre></td></tr></table></figure><p>配置 NAT 转发规则</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo iptables -t nat -A POSTROUTING -s 10.0.0.0/24 -o eth0 -j MASQUERADE</span><br><span class="line">sudo mkdir -p /etc/iptables</span><br><span class="line">sudo sh -c &quot;iptables-save &gt; /etc/iptables/rules.V4&quot;</span><br></pre></td></tr></table></figure><p><strong>NAT 转发（Network Address Translation Forwarding）</strong> 是一种通过网络设备（通常是路由器或防火墙）修改数据包的源或目标 IP 地址和端口的技术。</p><p><code>eth0</code> 是服务器的主网络接口（可能因服务器配置不同而有所不同，请确认实际使用的网络接口）。</p><ol start="5"><li>启动 WireGuard 服务</li></ol><p>启动 WireGuard 服务</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start wg-quick@wg0</span><br></pre></td></tr></table></figure><p>开机自启动</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl enable wg-quick@wg0</span><br></pre></td></tr></table></figure><h3 id="4-配置-WireGuard-客户端"><a href="#4-配置-WireGuard-客户端" class="headerlink" title="4. 配置 WireGuard 客户端"></a>4. 配置 WireGuard 客户端</h3><ol><li>创建客户端配置文件</li></ol><p>在服务器上创建 <code>/etc/wireguard/wg0.conf</code> 配置文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo touch /etc/wireguard/wg0.conf</span><br><span class="line">sudo nano /etc/wireguard/wg0.conf</span><br></pre></td></tr></table></figure><p>配置以下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[Interface]</span><br><span class="line">PrivateKey = &lt;client-private-key&gt;  # 填入客户端的私钥</span><br><span class="line">Address = 10.0.0.2/24  # 客户端的虚拟IP地址</span><br><span class="line"></span><br><span class="line">[Peer]</span><br><span class="line">PublicKey = &lt;server-public-key&gt;  # 填入服务器的公钥</span><br><span class="line">Endpoint = &lt;server-ip&gt;:51820  # 服务器的公网IP和端口</span><br><span class="line">AllowedIPs = 10.0.0.0/24  # 允许通过 VPN 访问</span><br><span class="line">PersistentKeepalive = 25  # 每隔 25 秒向服务器发送一次心跳包</span><br></pre></td></tr></table></figure><p>注意：客户端 Endpoint 的端口必须与服务器的 ListenPort 一致否则无法建立连接</p><p>注意：AllowedIPs &#x3D; 10.0.0.0&#x2F;24 ，不要设置成 0.0.0.0&#x2F;0 ，这样会把全部流量都代理到 wirdguard，导致访问外网异常</p><ol start="2"><li>启动客户端 WireGuard</li></ol><p>启动客户端的 WireGuard 连接</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start wg-quick@wg0</span><br></pre></td></tr></table></figure><p>开机自启动</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl enable wg-quick@wg0</span><br></pre></td></tr></table></figure><h3 id="5-验证连接"><a href="#5-验证连接" class="headerlink" title="5. 验证连接"></a>5. 验证连接</h3><ol><li>检查连接服务</li></ol><p>在服务器和客户端上，使用 <code>wg</code> 命令检查 WireGuard 连接状态</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo wg</span><br></pre></td></tr></table></figure><ol start="2"><li>测试网络连接</li></ol><p>从客户端尝试 ping 服务器的虚拟 IP 地址，检查是否能够连通</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping 10.0.0.1</span><br></pre></td></tr></table></figure><h3 id="6-进一步配置（可选）"><a href="#6-进一步配置（可选）" class="headerlink" title="6. 进一步配置（可选）"></a>6. <strong>进一步配置（可选）</strong></h3><ul><li><strong>路由配置</strong>：如果你希望客户端能够访问整个内网或互联网，可以在 WireGuard 配置文件中修改 <code>AllowedIPs</code>。</li><li><strong>多个客户端支持</strong>：如果需要多个客户端连接，可以为每个客户端生成独立的密钥对，并在服务器的配置文件中添加多个 <code>[Peer]</code> 条目。</li></ul><h3 id="7-重启服务"><a href="#7-重启服务" class="headerlink" title="7. 重启服务"></a>7. 重启服务</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo wg-quick down wg0</span><br><span class="line">sudo wg-quick up wg0</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
          <category> 网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术 </tag>
            
            <tag> 网络 </tag>
            
            <tag> VPN </tag>
            
            <tag> WireGuard </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用frp内网穿透</title>
      <link href="/2025/06/13/%E4%BD%BF%E7%94%A8frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/"/>
      <url>/2025/06/13/%E4%BD%BF%E7%94%A8frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="1、下载及安装"><a href="#1、下载及安装" class="headerlink" title="1、下载及安装"></a>1、下载及安装</h2><p>linux 下载及解压</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/fatedier/frp/releases/download/v0.46.0/frp_0.46.0_linux_amd64.tar.gz</span><br><span class="line">tar -zxvf frp_0.46.0_linux_amd64.tar.gz</span><br><span class="line">cd frp_0.46.0_linux_amd64</span><br></pre></td></tr></table></figure><p>windows 下载</p><p><a href="https://github.com/fatedier/frp/releases">下载</a></p><h2 id="2、服务端配置"><a href="#2、服务端配置" class="headerlink" title="2、服务端配置"></a>2、服务端配置</h2><p>找到 frps.ini 文件，配置以下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[common]</span><br><span class="line">bind_port = 7000  # 用于frp客户端连接的端口</span><br></pre></td></tr></table></figure><p>启动 frps </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./frps -c frps.ini</span><br></pre></td></tr></table></figure><p>这时，<code>frps</code> 会监听 7000 端口，等待 <code>frpc</code> 客户端连接</p><h2 id="3、客户端配置"><a href="#3、客户端配置" class="headerlink" title="3、客户端配置"></a>3、客户端配置</h2><p>找到 frpc.ini 文件，配置以下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[common]</span><br><span class="line">server_addr = 云服务器公网IP  # 阿里云服务器的公网IP</span><br><span class="line">server_port = 7000  # 云服务器上配置的端口</span><br><span class="line"></span><br><span class="line">[web]</span><br><span class="line">type = tcp  # 使用TCP协议</span><br><span class="line">local_ip = 127.0.0.1  # 本地 Web 服务的 IP</span><br><span class="line">local_port = 你的Web应用端口  # 本地服务的端口（例如 8080）</span><br><span class="line">remote_port = 8080  # 云服务器上暴露的端口，外部访问这个端口即可访问内网服务</span><br></pre></td></tr></table></figure><p>启动 frpc</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./frpc -c frpc.ini</span><br></pre></td></tr></table></figure><h2 id="4、持续运行及开机自启动"><a href="#4、持续运行及开机自启动" class="headerlink" title="4、持续运行及开机自启动"></a>4、持续运行及开机自启动</h2><h3 id="1、后台持续运行"><a href="#1、后台持续运行" class="headerlink" title="1、后台持续运行"></a>1、后台持续运行</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nohup ./frps -c frps.ini &amp;</span><br><span class="line">nohup ./frpc -c frpc.ini &amp;</span><br></pre></td></tr></table></figure><p>（注意：修改响应的 ini 文件后需重新执行上述命令重新启动 frps 或 frpc , 更新的文件才起作用）</p><h3 id="2、开机自启动配置"><a href="#2、开机自启动配置" class="headerlink" title="2、开机自启动配置"></a>2、开机自启动配置</h3><p>服务端在 &#x2F;etc&#x2F;systemd&#x2F;system 路径下创建 frps.service</p><p>客户端在 &#x2F;etc&#x2F;systemd&#x2F;system 路径下创建 frpc.service</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/systemd/system/</span><br><span class="line"></span><br><span class="line">sudo touch frps.service</span><br><span class="line"></span><br><span class="line">sudo touch frpc.service</span><br></pre></td></tr></table></figure><p>编辑 frps.service、frpc.service</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo nano frps.service</span><br><span class="line"></span><br><span class="line">sudo nano frpc.service</span><br></pre></td></tr></table></figure><p>编辑文件内容如下</p><p>服务端（这里注意修改 frps 路径）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=frps (frp server)</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">ExecStart=/path/to/frp/frps -c /path/to/frp/frps.ini</span><br><span class="line">Restart=always</span><br><span class="line">User=root</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><p>客户端（这里注意修改 frps 路径）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=frpc (frc server)</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">ExecStart=/path/to/frp/frpc -c /path/to/frp/frpc.ini</span><br><span class="line">Restart=always</span><br><span class="line">User=root</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><p>然后保存文件并重新启动服务</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 重新加载 systemd 配置</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line"></span><br><span class="line"># 启动 frpc 服务</span><br><span class="line">sudo systemctl start frpc</span><br><span class="line"></span><br><span class="line"># 设置 frpc 在系统启动时自动启动</span><br><span class="line">sudo systemctl enable frpc</span><br></pre></td></tr></table></figure><h2 id="5、查看服务状态"><a href="#5、查看服务状态" class="headerlink" title="5、查看服务状态"></a>5、查看服务状态</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 服务端</span><br><span class="line">sudo systemctl status frps</span><br><span class="line"></span><br><span class="line"># 客户端</span><br><span class="line">sudo systemctl status frpc</span><br></pre></td></tr></table></figure><p>如果 <code>frps</code> 服务正常运行，你将看到类似以下的输出：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">● frps.service - frps (frp server)</span><br><span class="line">   Loaded: loaded (/etc/systemd/system/frps.service; enabled; vendor preset: enabled)</span><br><span class="line">   Active: active (running) since Mon 2025-08-15 22:00:00 UTC; 10s ago</span><br><span class="line"> Main PID: 1234 (frps)</span><br><span class="line">   CGroup: /system.slice/frps.service</span><br><span class="line">           └─1234 /path/to/frp/frps -c /path/to/frp/frps.ini</span><br></pre></td></tr></table></figure><p>查看日志</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">journalctl -u frps -f</span><br><span class="line"></span><br><span class="line">journalctl -u frpc -f</span><br></pre></td></tr></table></figure><h2 id="6、停止服务"><a href="#6、停止服务" class="headerlink" title="6、停止服务"></a>6、停止服务</h2><p>停止服务</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl stop frps</span><br><span class="line"></span><br><span class="line">sudo systemctl stop frpc</span><br></pre></td></tr></table></figure><p>停止开机自启</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl disable frps</span><br><span class="line"></span><br><span class="line">sudo systemctl disable frpc</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
          <category> 网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术 </tag>
            
            <tag> 网络 </tag>
            
            <tag> frps </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>通过公网访问内网的多种实现</title>
      <link href="/2025/05/20/%E5%85%AC%E7%BD%91%E8%AE%BF%E9%97%AE%E5%86%85%E7%BD%91%E7%9A%84%E6%96%B9%E5%BC%8F/"/>
      <url>/2025/05/20/%E5%85%AC%E7%BD%91%E8%AE%BF%E9%97%AE%E5%86%85%E7%BD%91%E7%9A%84%E6%96%B9%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="多种实现"><a href="#多种实现" class="headerlink" title="多种实现"></a>多种实现</h2><h3 id="1-使用-SSH-反向代理"><a href="#1-使用-SSH-反向代理" class="headerlink" title="1. 使用 SSH 反向代理"></a>1. 使用 SSH 反向代理</h3><ol><li><p><strong>准备工作</strong>：</p><ul><li>在家里的主机上启用 SSH 服务，并确保可以从云服务器上访问。</li><li>确保云服务器的防火墙和安全组设置允许 SSH 访问。</li></ul></li><li><p><strong>在云服务器上进行反向 SSH 连接</strong>：<br> 在家里的主机上使用 SSH 建立到云服务器的连接，并建立一个反向隧道。</p><p>假设云服务器 IP 是 <code>your-cloud-server-ip</code>，并且在云服务器上已经有了一个 SSH 密钥或用户名和密码。</p><p>在家里的主机上运行以下命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -R 12345:localhost:22 your-username@your-cloud-server-ip</span><br></pre></td></tr></table></figure><p>解释：</p><ul><li><code>-R 12345:localhost:22</code>：这会在云服务器上创建一个端口转发，将云服务器的端口 <code>12345</code> 转发到家里主机的 SSH 服务（默认端口是 22）。</li><li><code>your-username</code>：云服务器的用户名。</li><li><code>your-cloud-server-ip</code>：云服务器的 IP 地址。</li></ul></li><li><p><strong>连接到家里的主机</strong>：<br> 通过云服务器，可以从任何地方 SSH 连接到家里的主机。只需要通过云服务器的 IP 和端口 <code>12345</code> 来连接：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -p 12345 user@your-cloud-server-ip</span><br></pre></td></tr></table></figure></li></ol><h3 id="2-使用-VPN"><a href="#2-使用-VPN" class="headerlink" title="2. 使用 VPN"></a>2. 使用 VPN</h3><ol><li><strong>设置 VPN 服务器</strong>：<ul><li>在云服务器上搭建一个 VPN 服务（比如 OpenVPN 或 WireGuard）。</li><li>配置 VPN，使得家里的主机可以通过 VPN 连接到云服务器上。</li></ul></li><li><strong>配置家里的主机连接到 VPN</strong>：<ul><li>在家里的主机上安装 VPN 客户端（如 OpenVPN 客户端）。</li><li>配置连接到云服务器上的 VPN。</li></ul></li><li><strong>连接后访问家里主机</strong>：<ul><li>一旦家里的主机通过 VPN 连接到云服务器，云服务器就可以作为跳板，在公网环境下访问家里的主机。</li></ul></li></ol><h3 id="3-使用-Dynamic-DNS-DDNS-和端口转发"><a href="#3-使用-Dynamic-DNS-DDNS-和端口转发" class="headerlink" title="3. 使用 Dynamic DNS (DDNS) 和端口转发"></a>3. 使用 Dynamic DNS (DDNS) 和端口转发</h3><ol><li><strong>设置 Dynamic DNS（DDNS）</strong>：<ul><li>如果你家的公网 IP 地址是动态分配的（大多数家庭网络都是），你可以使用动态 DNS 服务（如 <code>no-ip</code>、<code>DynDNS</code> 等）来获取一个固定的域名，避免频繁查找和更新 IP 地址。</li></ul></li><li><strong>配置路由器端口转发</strong>：<ul><li>在家里路由器上设置端口转发，将公网 IP 的某个端口（比如 22）转发到你家里主机的 SSH 服务端口。</li></ul></li><li><strong>通过 DDNS 连接到家里主机</strong>：<ul><li>你可以通过 DDNS 提供的域名在任何地方远程 SSH 连接到家里主机。</li></ul></li></ol><h2 id="VPN-与-内网穿透的对比"><a href="#VPN-与-内网穿透的对比" class="headerlink" title="VPN 与 内网穿透的对比"></a>VPN 与 内网穿透的对比</h2><p>**VPN（虚拟专用网络）**和**内网穿透**是两种实现远程访问和内网通信的技术，它们有一些相似之处，但也有很大的区别。下面是它们的详细对比：</p><h3 id="1-VPN（虚拟专用网络）"><a href="#1-VPN（虚拟专用网络）" class="headerlink" title="1. VPN（虚拟专用网络）"></a>1. <strong>VPN（虚拟专用网络）</strong></h3><h4 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h4><p>VPN 是一种通过公共网络（如互联网）建立安全通信通道的技术，允许远程用户和分支机构安全地访问企业或家庭内部网络，就像在本地网络中一样。</p><h4 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h4><ul><li>远程设备（如家里的电脑、手机等）通过互联网连接到 VPN 服务器，建立一条加密的通道。</li><li>一旦连接成功，远程设备就像是直接连接到企业或家庭的局域网（LAN）一样，可以访问内部资源（例如文件服务器、打印机等）。</li><li>VPN 通常会为远程设备分配一个虚拟 IP 地址，并通过加密和身份验证确保数据传输的安全性。</li></ul><h4 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h4><ul><li><strong>安全性高</strong>：VPN 通道通常使用加密算法（如 AES、SSL&#x2F;TLS）来确保数据的安全。</li><li><strong>完整访问内网</strong>：通过 VPN 连接后，远程用户就像是连接到了内网，可以访问整个局域网中的设备和资源。</li><li><strong>隐私保护</strong>：VPN 可以隐藏用户的实际 IP 地址，增加网络隐私保护。</li></ul><h4 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h4><ul><li><strong>配置较复杂</strong>：需要在服务器和客户端之间建立 VPN 连接，可能需要配置路由器、证书、密钥等。</li><li><strong>性能问题</strong>：VPN 通常需要加密和解密数据，这可能影响速度，尤其是在带宽较低的网络环境下。</li></ul><h4 id="常见应用场景"><a href="#常见应用场景" class="headerlink" title="常见应用场景"></a>常见应用场景</h4><ul><li>远程工作时需要访问公司内部网络。</li><li>保护用户的隐私并绕过地理限制访问受限内容。</li></ul><hr><h3 id="2-内网穿透（NAT-穿透）"><a href="#2-内网穿透（NAT-穿透）" class="headerlink" title="2. 内网穿透（NAT 穿透）"></a>2. <strong>内网穿透（NAT 穿透）</strong></h3><h4 id="定义-1"><a href="#定义-1" class="headerlink" title="定义"></a>定义</h4><p>内网穿透是一种技术，允许位于 NAT（网络地址转换）后的设备（例如家里或办公室的私有网络中的设备）能够在没有公网 IP 地址的情况下，接受外部网络的访问。</p><h4 id="工作原理-1"><a href="#工作原理-1" class="headerlink" title="工作原理"></a>工作原理</h4><ul><li>内网穿透通常是通过第三方中转服务器（也可以是你自建的服务器）来实现的。</li><li>设备A（在内网）启动一个穿透客户端，通过网络连接到一个公网服务器。</li><li>外部设备（设备B）通过访问该中转服务器，进而与设备A建立连接。设备B不直接连接到设备A的公网 IP，而是通过中转服务器转发数据。</li></ul><h4 id="优点-1"><a href="#优点-1" class="headerlink" title="优点"></a>优点</h4><ul><li><strong>穿越 NAT 和防火墙</strong>：内网设备通常无法直接被外部访问，因为它们没有公网 IP 地址。而内网穿透技术通过中转服务器，能够突破 NAT 屏障，实现外网访问。</li><li><strong>简单易用</strong>：一些内网穿透工具（如 ngrok、frp、ZeroTier）提供了简易的配置方式，适合快速实现外部访问。</li></ul><h4 id="缺点-1"><a href="#缺点-1" class="headerlink" title="缺点"></a>缺点</h4><ul><li><strong>需要中转服务器</strong>：大多数内网穿透需要借助第三方的公网服务器进行中转，可能需要租用云服务器（例如阿里云、AWS）或者使用免费的穿透服务（例如 ngrok）。</li><li><strong>安全性较低</strong>：由于内网穿透是通过第三方服务器中转，某些情况下可能存在安全风险，尤其是使用免费的穿透服务时。</li><li><strong>连接稳定性问题</strong>：对于高并发或长时间连接，内网穿透的稳定性和性能可能会受到影响。</li></ul><h4 id="常见应用场景-1"><a href="#常见应用场景-1" class="headerlink" title="常见应用场景"></a>常见应用场景</h4><ul><li>家庭设备或小型企业设备需要暴露服务给外部访问，但无法获得公网 IP 地址。</li><li>临时的外网访问需求，如远程调试、IoT 设备管理等。</li></ul><hr><h3 id="3-主要区别"><a href="#3-主要区别" class="headerlink" title="3. 主要区别"></a>3. <strong>主要区别</strong></h3><table><thead><tr><th><strong>特性</strong></th><th><strong>VPN</strong></th><th><strong>内网穿透</strong></th></tr></thead><tbody><tr><td><strong>连接方式</strong></td><td>建立加密的虚拟通道，访问内网资源</td><td>通过中转服务器或穿透客户端实现访问</td></tr><tr><td><strong>适用场景</strong></td><td>远程访问整个内网资源、加密通信</td><td>临时暴露内网服务给外部访问</td></tr><tr><td><strong>配置复杂度</strong></td><td>需要配置 VPN 服务、路由等</td><td>配置简单，使用第三方穿透工具（如 ngrok）即可</td></tr><tr><td><strong>安全性</strong></td><td>高（通过加密、身份验证保护）</td><td>较低（依赖于中转服务器的安全性）</td></tr><tr><td><strong>访问范围</strong></td><td>访问整个内网资源（如文件、打印机等）</td><td>仅访问特定的内网服务或端口</td></tr><tr><td><strong>性能</strong></td><td>可能有延迟，尤其是在低带宽情况下</td><td>受限于穿透服务器和网络的稳定性</td></tr></tbody></table><hr><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><ul><li><strong>VPN</strong> 适合需要全网访问、对安全性有较高要求的场景，尤其是当你需要长期远程接入公司的内部网络或家庭网络时。</li><li><strong>内网穿透</strong> 适合临时、简单的外网访问需求，比如在没有公网 IP 的情况下访问家中的某个服务或设备，通常用于暴露特定端口或服务。</li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
          <category> 网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术 </tag>
            
            <tag> 网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vim的使用方法</title>
      <link href="/2025/05/01/Vim%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/"/>
      <url>/2025/05/01/Vim%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="Vim的使用方法"><a href="#Vim的使用方法" class="headerlink" title="Vim的使用方法"></a>Vim的使用方法</h1><p>Vim是一款强大的命令行文本编辑器，具有高度可定制性和效率。以下是基本的使用步骤和一些常见操作：</p><h2 id="启动-Vim："><a href="#启动-Vim：" class="headerlink" title="启动 Vim："></a>启动 Vim：</h2><ol><li>打开或创建文件：<ul><li>打开一个已存在的文件：<code>vim filename.txt</code></li><li>创建并打开一个新文件（如果不存在则创建）：<code>vim newfile.py</code></li></ul></li></ol><h2 id="模式切换："><a href="#模式切换：" class="headerlink" title="模式切换："></a>模式切换：</h2><ul><li><strong>普通模式（Normal Mode）</strong>：启动Vim后默认进入此模式，可以进行光标移动、剪切、复制、粘贴等操作。<ul><li>要从其他模式回到普通模式，按 <code>Esc</code> 键。</li></ul></li><li><strong>插入模式（Insert Mode）</strong>：在此模式下可以输入文本。<ul><li>进入插入模式：在普通模式下按下i、a、o等键。<ul><li><code>i</code> 在当前光标前插入</li><li><code>a</code> 在当前光标后插入</li><li><code>o</code> 在当前行下方新开一行并插入</li></ul></li></ul></li><li><strong>可视模式（Visual Mode）</strong>：用于选择文本区域以执行批量操作。<ul><li>进入可视模式：在普通模式下按下 <code>v</code> 选择字符，<code>V</code> 选择行，<code>Ctrl + v</code> 选择列块。</li></ul></li><li><strong>命令行模式（Command-Line Mode）</strong>：<ul><li>输入冒号 <code>:</code> 进入命令行模式，可以执行保存、退出、查找替换等各种高级命令。</li></ul></li></ul><h2 id="基本操作："><a href="#基本操作：" class="headerlink" title="基本操作："></a>基本操作：</h2><ul><li>移动光标：<ul><li>左移：<code>h</code></li><li>右移：<code>l</code></li><li>上移：<code>k</code></li><li>下移：<code>j</code></li><li>移到行首：<code>0</code> 或 <code>^</code> (移到第一个非空白字符)</li><li>移到行尾： <code>$</code></li></ul></li><li>插入&#x2F;删除文字：<ul><li>插入文本：在普通模式下按 <code>i</code> 进入插入模式，然后开始输入。</li><li>删除字符：在普通模式下按 <code>x</code> 删除当前光标处的字符；<code>dw</code> 删除光标到下一个单词结束的文本。</li></ul></li><li>保存与退出：<ul><li>不保存退出：在命令行模式输入 <code>:q!</code></li><li>保存并退出：在命令行模式输入 <code>:wq</code></li><li>只保存不退出：<code>:w</code></li></ul></li><li>查找与替换：<ul><li>查找字符串：<code>:/{search_term}</code> 或 <code>/search_term</code> （回车后向下查找，<code>n</code> 继续查找下一个，<code>N</code> 查找上一个）</li><li>替换文本：<code>:s/old/new/g</code> （全局替换当前行第一个匹配项；<code>:s/old/new/gc</code> 提示确认每次替换）</li></ul></li><li>复制&#x2F;粘贴：<ul><li>复制视觉模式选中的内容：<code>y</code>（拷贝），然后移动光标到目标位置，<code>p</code>（粘贴）</li><li>复制一行：<code>yy</code>，粘贴：<code>p</code></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术 </tag>
            
            <tag> 工具 </tag>
            
            <tag> 编辑器 </tag>
            
            <tag> Vim </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SVN的使用</title>
      <link href="/2025/04/30/SVN%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2025/04/30/SVN%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="SVN的使用"><a href="#SVN的使用" class="headerlink" title="SVN的使用"></a>SVN的使用</h1><h2 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h2><p>SVN（Subversion）是一种集中式版本控制系统（CVCS），用于管理源代码、文档或其他文件的版本历史。<br>特点：</p><ul><li>集中式：有一个中央仓库（Repository），所有人从中央仓库检出代码，提交修改到中央仓库。</li><li>支持历史版本、回滚、分支、标签。</li><li>广泛应用于企业内部开发、工业控制、文档管理等场景。</li></ul><hr><h2 id="二、与-Git-的异同"><a href="#二、与-Git-的异同" class="headerlink" title="二、与 Git 的异同"></a>二、与 Git 的异同</h2><table><thead><tr><th>特性</th><th>SVN</th><th>Git</th></tr></thead><tbody><tr><td>架构</td><td>集中式版本控制</td><td>分布式版本控制</td></tr><tr><td>仓库位置</td><td>中央服务器仓库</td><td>每个开发者本地都有完整仓库</td></tr><tr><td>离线能力</td><td>只能在本地工作副本，提交需要联网</td><td>本地可提交，联网后推送</td></tr><tr><td>分支与合并</td><td>分支较重，合并相对复杂</td><td>分支轻量，合并高效</td></tr><tr><td>大文件支持</td><td>较好，适合文档&#x2F;二进制文件</td><td>较差，大文件会膨胀仓库</td></tr><tr><td>权限控制</td><td>仓库级别或目录级别</td><td>通常依赖服务器（GitHub&#x2F;GitLab）管理</td></tr><tr><td>适合场景</td><td>企业内部协作、工业软件、文档管理</td><td>开源项目、多人协作开发</td></tr></tbody></table><hr><h2 id="三、基本用法（命令行）"><a href="#三、基本用法（命令行）" class="headerlink" title="三、基本用法（命令行）"></a>三、基本用法（命令行）</h2><p>假设已经有工作副本或仓库。</p><ol><li><strong>检出仓库（Checkout）</strong></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svn checkout &lt;仓库地址&gt;</span><br></pre></td></tr></table></figure><ol><li><strong>更新工作副本（Update）</strong></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svn update</span><br></pre></td></tr></table></figure><ol><li><strong>查看状态（Status）</strong></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svn status</span><br></pre></td></tr></table></figure><p>标记说明：</p><ul><li>M：已修改</li><li>?：未受版本控制</li><li>A：已添加</li><li>D：已删除</li><li>C：冲突</li></ul><ol><li><strong>添加新文件（Add）</strong></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svn add &lt;文件或文件夹&gt;</span><br></pre></td></tr></table></figure><ol><li><strong>提交修改（Commit）</strong></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svn commit -m &quot;提交说明&quot;</span><br></pre></td></tr></table></figure><ol><li><strong>查看日志（Log）</strong></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svn log</span><br></pre></td></tr></table></figure><ol><li><strong>解决冲突（Resolve）</strong></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svn resolved &lt;文件&gt;</span><br></pre></td></tr></table></figure><hr><h2 id="四、创建本地仓库（file-）"><a href="#四、创建本地仓库（file-）" class="headerlink" title="四、创建本地仓库（file:&#x2F;&#x2F;）"></a>四、创建本地仓库（file:&#x2F;&#x2F;）</h2><ol><li>创建仓库目录，例如：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">D:\SVNRepos\ProjectA</span><br></pre></td></tr></table></figure><ol><li>创建仓库：</li></ol><ul><li>命令行：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svnadmin create D:\SVNRepos\ProjectA</span><br></pre></td></tr></table></figure><ul><li>或使用 TortoiseSVN：<br> 右键 → Create Repository Here</li></ul><ol><li>使用本地仓库：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svn checkout file:///D:/SVNRepos/ProjectA</span><br></pre></td></tr></table></figure><blockquote><p>注意：本地仓库默认没有账号密码验证。</p></blockquote><hr><h2 id="五、创建网络仓库（svn-）"><a href="#五、创建网络仓库（svn-）" class="headerlink" title="五、创建网络仓库（svn:&#x2F;&#x2F;）"></a>五、创建网络仓库（svn:&#x2F;&#x2F;）</h2><h3 id="1-使用-VisualSVN-Server（推荐-Windows）"><a href="#1-使用-VisualSVN-Server（推荐-Windows）" class="headerlink" title="1. 使用 VisualSVN Server（推荐 Windows）"></a>1. 使用 VisualSVN Server（推荐 Windows）</h3><ul><li>下载：<a href="https://www.visualsvn.com/server/download/">https://www.visualsvn.com/server/download/</a></li><li>安装后可通过 GUI 创建仓库、添加用户、设置权限。</li><li>仓库地址示例：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svn://192.168.1.100/ProjectA</span><br></pre></td></tr></table></figure><h3 id="2-使用-svnserve-命令行（需要-CollabNet-Subversion）"><a href="#2-使用-svnserve-命令行（需要-CollabNet-Subversion）" class="headerlink" title="2. 使用 svnserve 命令行（需要 CollabNet Subversion）"></a>2. 使用 svnserve 命令行（需要 CollabNet Subversion）</h3><ol><li>安装带 svnserve 的 SVN 客户端</li><li>创建仓库：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svnadmin create E:\SVNRepos\ProjectA</span><br></pre></td></tr></table></figure><ol><li>配置权限：</li></ol><p>编辑 <code>conf/svnserve.conf</code>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">anon-access = none</span><br><span class="line">auth-access = write</span><br><span class="line">password-db = passwd</span><br></pre></td></tr></table></figure><p>编辑 <code>conf/passwd</code> 添加用户：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[users]</span><br><span class="line">admin = 123456</span><br><span class="line">dev1 = abc123</span><br></pre></td></tr></table></figure><ol><li>启动服务：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svnserve -d -r E:\SVNRepos</span><br></pre></td></tr></table></figure><ol><li>客户端检出：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svn checkout svn://&lt;服务器IP&gt;/ProjectA</span><br></pre></td></tr></table></figure><h2 id="六、总结"><a href="#六、总结" class="headerlink" title="六、总结"></a>六、总结</h2><ul><li>SVN 是集中式版本控制，适合企业内部、工业软件和文档管理。</li><li>对比 Git，SVN 更适合大文件和局域网多人协作，但离线能力差。</li><li>基本操作：Checkout、Update、Add、Commit、Log。</li><li>本地仓库适合个人练习，网络仓库适合多人协作和权限管理。</li><li>网络仓库可通过 <strong>VisualSVN Server</strong>（图形界面）或 <strong>svnserve</strong>（命令行）搭建。</li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术 </tag>
            
            <tag> 工具 </tag>
            
            <tag> SVN </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git的使用</title>
      <link href="/2025/03/16/Git%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2025/03/16/Git%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="一、配置-Git"><a href="#一、配置-Git" class="headerlink" title="一、配置 Git"></a>一、配置 Git</h1><p>用户配置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name zhiyuan6589</span><br><span class="line">git config --global user.email &quot;zhiyuan6589@gmail.com&quot;</span><br></pre></td></tr></table></figure><p>用户验证</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name</span><br><span class="line">git config --global user.email</span><br></pre></td></tr></table></figure><p>查看配置信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --list</span><br></pre></td></tr></table></figure><p>…</p><h1 id="二、配置-SSH-Key"><a href="#二、配置-SSH-Key" class="headerlink" title="二、配置 SSH Key"></a>二、配置 SSH Key</h1><p>注：<code>windows</code>与<code>ubuntu</code>操作方式相同，<code>windows</code>下需使用<code>git</code>安装后自带的<code>git bash here</code></p><p>进入ssh目录</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd ~/.ssh</span><br></pre></td></tr></table></figure><p>查看是否存在 <code>id_rsa</code>（私钥）以及 <code>id_rsa.pub</code>（公钥）</p><p>若不存在以上文件则使用以下命令生成</p><p>ubuntu使用以下命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C zhiyuan6589@gmail.com</span><br></pre></td></tr></table></figure><p>windows下使用以下命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen.exe</span><br></pre></td></tr></table></figure><p>如有提示信息，点击 <code>enter</code> 即可，不需要设置密码</p><p>通过以下指令获取 <code>id_rsa.pub</code> 文件中的内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat ~/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure><p>将终端中的公钥内容复制至 <code>github</code> 中的 <code>Settings -&gt; SSH and GPG keys -&gt; New SSH key</code> 的key部分</p><p>命名一个 <code>title</code>，点击 <code>add key</code> 后提示添加成功</p><p>…</p><h1 id="三、配置-Personal-Access-Tokens"><a href="#三、配置-Personal-Access-Tokens" class="headerlink" title="三、配置 Personal Access Tokens"></a>三、配置 Personal Access Tokens</h1><p>进入 <code>github</code> 中的 <code>Settings -&gt; Developer settings</code></p><p>选择 <code>Personal Access Tokens</code>, 勾选需要的有效时长以及权限后生成 <code>token</code></p><p>使用 账号 + <code>token</code> 的方式从仓库使用 <code>https</code> 克隆仓库代码</p><p>…</p><h1 id="四、git-命令"><a href="#四、git-命令" class="headerlink" title="四、git 命令"></a>四、git 命令</h1><h2 id="git-init"><a href="#git-init" class="headerlink" title="git init"></a>git init</h2><p>初始化git</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure><p>初始化指定文件夹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init &lt;directory&gt;</span><br></pre></td></tr></table></figure><p>…</p><h2 id="git-clone"><a href="#git-clone" class="headerlink" title="git clone"></a>git clone</h2><p>克隆</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone git@github.com:zhiyuan6589/test-git.git</span><br></pre></td></tr></table></figure><p>…</p><h2 id="git-status"><a href="#git-status" class="headerlink" title="git status"></a>git status</h2><p>查看 git 状态</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br></pre></td></tr></table></figure><p>…</p><h2 id="git-add"><a href="#git-add" class="headerlink" title="git add"></a>git add</h2><p>添加文件到暂存区</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add hello.py</span><br></pre></td></tr></table></figure><p>一次性添加所有文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br></pre></td></tr></table></figure><p>…</p><h2 id="git-reset"><a href="#git-reset" class="headerlink" title="git reset"></a>git reset</h2><p>取消加入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset HEAD &lt;file&gt;</span><br></pre></td></tr></table></figure><p>提交</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -m &quot;add hello.py&quot;</span><br></pre></td></tr></table></figure><p>返回至当前版本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard HEAD</span><br></pre></td></tr></table></figure><p>回退至上一个版本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard HEAD~1</span><br></pre></td></tr></table></figure><p>回退至上上个版本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard HEAD~2</span><br></pre></td></tr></table></figure><p>…</p><h2 id="git-reflog"><a href="#git-reflog" class="headerlink" title="git reflog"></a>git reflog</h2><p>查看版本号</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reflog</span><br></pre></td></tr></table></figure><p>回退至特定版本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard version_id</span><br></pre></td></tr></table></figure><p><code>--hard</code> 将之前的 <code>commit</code> 都丟掉（ 完全不保留 ）</p><p><code>--soft</code> 将之前的 <code>commit</code> 都丟掉，但保留之前工作区的状态</p><p>…</p><h2 id="git-push"><a href="#git-push" class="headerlink" title="git push"></a>git push</h2><p>推送</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push</span><br></pre></td></tr></table></figure><p>消除已经 <code>push</code> 的 <code>commit</code>，可以先回到某个版本，然后再强制 <code>push</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git push --force</span><br><span class="line">git push -f</span><br></pre></td></tr></table></figure><p>注意：在多人共同开发时，尽量不要使用 <code>--force</code>、，因为有可能会伤害到别人，建议使用使用 <code>revert</code></p><p>建议使用以下方法，可确保自己没有丢掉别人的 <code>commit</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push --force-with-lease</span><br></pre></td></tr></table></figure><p>…</p><h2 id="git-checkout"><a href="#git-checkout" class="headerlink" title="git checkout"></a>git checkout</h2><p>丢弃</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout --hello.py</span><br></pre></td></tr></table></figure><p>以上命令会将工作区中的修改全部撤销掉,回退到最近一次 <code>commit</code> 的状态</p><p>删除</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rm hello.py</span><br><span class="line">git rm hello.py</span><br><span class="line">git commit -m &#x27;remove hello.py&#x27;</span><br></pre></td></tr></table></figure><p>若错误删除可使用以下命令进行还原</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -- hello.py</span><br></pre></td></tr></table></figure><p>…</p><h2 id="git-branch"><a href="#git-branch" class="headerlink" title="git branch"></a>git branch</h2><p>查看分支</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch</span><br></pre></td></tr></table></figure><p>创建分支</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch bug1</span><br></pre></td></tr></table></figure><p>切换分支到bug1</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout bug1</span><br></pre></td></tr></table></figure><p>创建分支并且切换到该分支</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b bug1</span><br></pre></td></tr></table></figure><p>快速切换到上一个分支</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -</span><br></pre></td></tr></table></figure><p>切换到 <code>master</code> 并将 <code>bug1</code> 分支合并到 <code>master</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout master</span><br><span class="line">git merge bug1</span><br></pre></td></tr></table></figure><p>删除分支</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -d bug1</span><br></pre></td></tr></table></figure><p>丢弃没有合并的分支</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -D dev</span><br></pre></td></tr></table></figure><p>重命名分支( <code>id</code> 不会改变)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -m dev1</span><br></pre></td></tr></table></figure><p>查看远端有哪些分支</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git branch --remote</span><br><span class="line">git branch -r</span><br></pre></td></tr></table></figure><p>切换分支</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout dev</span><br></pre></td></tr></table></figure><p>…</p><h2 id="git-switch"><a href="#git-switch" class="headerlink" title="git switch"></a>git switch</h2><p>切换到已经存在的分支</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git switch dev</span><br></pre></td></tr></table></figure><p>新建分支并切换至该分支</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git switch -c dev</span><br><span class="line">git switch -c &lt;new-branch&gt; &lt;commit_id&gt;</span><br><span class="line">git switch -c &lt;new-branch&gt; HEAD~2</span><br></pre></td></tr></table></figure><p>…</p><h2 id="git-restore"><a href="#git-restore" class="headerlink" title="git restore"></a>git restore</h2><p>还原</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git restore &lt;file&gt;</span><br></pre></td></tr></table></figure><p>还原当前文件夹的全部文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git restore .</span><br></pre></td></tr></table></figure><p>…</p><h2 id="git-pull"><a href="#git-pull" class="headerlink" title="git pull"></a>git pull</h2><p>拉取</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull</span><br></pre></td></tr></table></figure><p>到指定路径下抓取</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git [-C &lt;path&gt;] pull</span><br><span class="line"></span><br><span class="line">cd path</span><br><span class="line">git pull</span><br></pre></td></tr></table></figure><p>…</p><h2 id="git-fecth"><a href="#git-fecth" class="headerlink" title="git fecth"></a>git fecth</h2><p>获取</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git fetch</span><br></pre></td></tr></table></figure><p>可以理解为 <code>git pull = git fetch + git merge</code></p><p>…</p><h1 id="五、添加-gitignore文件"><a href="#五、添加-gitignore文件" class="headerlink" title="五、添加.gitignore文件"></a>五、添加.gitignore文件</h1><p>可忽略不需要进行版本控制的文件或路径\</p><h1 id="六、commit-message规范"><a href="#六、commit-message规范" class="headerlink" title="六、commit message规范"></a>六、commit message规范</h1><p>使用以下命令提交 commit message&#96;</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -m &quot;commit message&quot;</span><br></pre></td></tr></table></figure><p>commit message 格式</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;</span><br></pre></td></tr></table></figure><table><thead><tr><th>type</th><th>说明</th></tr></thead><tbody><tr><td>feat</td><td>新功能（feature）</td></tr><tr><td>fix</td><td>修复 bug</td></tr><tr><td>docs</td><td>文档修改</td></tr><tr><td>style</td><td>格式（空格、分号、缩进等，不影响功能）</td></tr><tr><td>refactor</td><td>重构（既不是新功能，也不是修 bug）</td></tr><tr><td>perf</td><td>性能优化</td></tr><tr><td>test</td><td>添加&#x2F;修改测试</td></tr><tr><td>build</td><td>构建系统或外部依赖修改</td></tr><tr><td>ci</td><td>CI 配置修改</td></tr><tr><td>chore</td><td>其他杂项修改（不属于以上）</td></tr><tr><td>revert</td><td>回退到之前的 commit</td></tr></tbody></table><p><strong>type(必须)</strong></p><p>用于说明git commit的类别，只允许使用下面的标识。</p><p>feat：新功能（feature）。</p><p>fix&#x2F;to：修复bug，可以是QA发现的BUG，也可以是研发自己发现的BUG。</p><ul><li>fix：产生diff并自动修复此问题。适合于一次提交直接修复问题</li><li>to：只产生diff不自动修复此问题。适合于多次提交。最终修复问题提交时使用fix</li></ul><p>docs：文档（documentation）。</p><p>style：格式（不影响代码运行的变动）。</p><p>refactor：重构（即不是新增功能，也不是修改bug的代码变动）。</p><p>perf：优化相关，比如提升性能、体验。</p><p>test：增加测试。</p><p>chore：构建过程或辅助工具的变动。</p><p>revert：回滚到上一个版本。</p><p>merge：代码合并。</p><p>sync：同步主线或分支的Bug。</p><p><strong>scope(可选)</strong></p><p>scope用于说明 commit 影响的范围，比如数据层、控制层、视图层等等，视项目不同而不同。</p><p>例如在Angular，可以是location，browser，compile，compile，rootScope， ngHref，ngClick，ngView等。如果你的修改影响了不止一个scope，你可以使用*代替。</p><p><strong>subject(必须)</strong></p><p>subject是commit目的的简短描述，不超过50个字符。</p><ul><li>结尾不加句号或其他标点符号。</li><li>根据以上规范git commit message将是如下的格式：</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fix(DAO): 用户查询缺少username属性</span><br><span class="line">feat(Controller): 用户查询接口开发</span><br></pre></td></tr></table></figure><table><thead><tr><th>type</th><th>说明</th></tr></thead><tbody><tr><td>feat</td><td>新功能（feature）</td></tr><tr><td>fix</td><td>修复 bug</td></tr><tr><td>docs</td><td>文档修改</td></tr><tr><td>style</td><td>代码格式修改（不影响功能）</td></tr><tr><td>refactor</td><td>代码重构（不新增功能、不修复 bug）</td></tr><tr><td>test</td><td>增加或修改测试</td></tr><tr><td>chore</td><td>构建&#x2F;工具&#x2F;依赖修改</td></tr></tbody></table><h1 id="七、已经-commit-但是没有-push-撤销方法"><a href="#七、已经-commit-但是没有-push-撤销方法" class="headerlink" title="七、已经 commit 但是没有 push 撤销方法"></a>七、已经 commit 但是没有 push 撤销方法</h1><p>保留改动，只撤销 commit</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --soft HEAD~1</span><br></pre></td></tr></table></figure><p>撤销 commit 且丢掉改动</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard HEAD~1</span><br></pre></td></tr></table></figure><p>重新修改 commit message</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit --amend</span><br></pre></td></tr></table></figure><h1 id="八、git-无法推送到远程仓库"><a href="#八、git-无法推送到远程仓库" class="headerlink" title="八、git 无法推送到远程仓库"></a>八、git 无法推送到远程仓库</h1><p>git push 报错:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ubuntu@ubuntu-VMware-Virtual-Platform:~/code/my_blog$ git push kex_exchange_identification: read: Connection reset by peer Connection reset by 20.205.243.166 port 22 fatal: Could not read from remote repository. Please make sure you have the correct access rights and the repository exists.</span><br></pre></td></tr></table></figure><p>解决方法：</p><p>将 22 端口改用 443 端口 ( windows方法相同，在 ~&#x2F;.ssh&#x2F;config 中添加 github 的443端口 )</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano ~/.ssh/config</span><br></pre></td></tr></table></figure><p>添加以下配置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Host github.com</span><br><span class="line">  Hostname ssh.github.com</span><br><span class="line">  Port 443</span><br><span class="line">  User git</span><br></pre></td></tr></table></figure><p>测试连接状态</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T -p 443 git@ssh.github.com</span><br></pre></td></tr></table></figure><h1 id="九、放弃本地代码，强制拉取最新代码，保留本地未跟踪文件"><a href="#九、放弃本地代码，强制拉取最新代码，保留本地未跟踪文件" class="headerlink" title="九、放弃本地代码，强制拉取最新代码，保留本地未跟踪文件"></a>九、放弃本地代码，强制拉取最新代码，保留本地未跟踪文件</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git fetch --all</span><br><span class="line">git reset --hard origin/main</span><br></pre></td></tr></table></figure><h1 id="十、如何在-github-上提交-PR"><a href="#十、如何在-github-上提交-PR" class="headerlink" title="十、如何在 github 上提交 PR"></a>十、如何在 github 上提交 PR</h1><p>1、将需要修改的项目存储库 Fork 到自己的仓库（在自己仓库创建仓库快照）</p><p>2、将自己仓库的该项目存储库 git clone 到本地</p><p>3、使用 git branch branchName 新建分支</p><p>4、修改代码并提交，推送到远端</p><p>5、在 github 自己存储库的该项目中，点击上方提示的 “Compare &amp; pull request”，编辑 PR 相关信息然后点击 “Create pull request” 创建 PR</p><p>6、等待审核通过后，自己修改的内容将合并到原来该开源项目中</p><p>7、如何更新自己仓库中 Fork 下来的代码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git remote add upstream git@github.com:h2pl/JavaTutorial.git</span><br><span class="line"></span><br><span class="line">git fetch upstream</span><br><span class="line"></span><br><span class="line">git merge upstream master</span><br></pre></td></tr></table></figure><h1 id="十一、在本地初始化版本控制仓库并推送到远端仓库"><a href="#十一、在本地初始化版本控制仓库并推送到远端仓库" class="headerlink" title="十一、在本地初始化版本控制仓库并推送到远端仓库"></a>十一、在本地初始化版本控制仓库并推送到远端仓库</h1><p>1、初始化本地仓库</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure><p>2、创建并使用 main 分支</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b main</span><br></pre></td></tr></table></figure><p>3、将本地文件添加到版本仓库</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br></pre></td></tr></table></figure><p>4、提交代码到本地</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -m &quot;commit message&quot;</span><br></pre></td></tr></table></figure><p>5、查看本地的分支名称</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch</span><br></pre></td></tr></table></figure><p>6、在github上创建新的仓库，并复制仓库的ssh url</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git@github.com:zhiyuan6589/test-dotnet.git</span><br></pre></td></tr></table></figure><p>7、在本地仓库关联远端仓库</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin git@github.com:zhiyuan6589/test-dotnet.git</span><br></pre></td></tr></table></figure><p>8、推送代码到远端仓库，初次提交使用以下命令（分支名为main)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push -u origin main</span><br></pre></td></tr></table></figure><p>(注意：本地 git 默认分支为 master，github 默认主分支为 main)</p><h1 id="十二、将已经添加到仓库的文件取消版本控制"><a href="#十二、将已经添加到仓库的文件取消版本控制" class="headerlink" title="十二、将已经添加到仓库的文件取消版本控制"></a>十二、将已经添加到仓库的文件取消版本控制</h1><ol><li>执行以下命令将文件从版本库中删除</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rm --cached filename</span><br></pre></td></tr></table></figure><ol start="2"><li>提交并推送代码</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git commit -m &quot;commit message&quot;</span><br><span class="line"></span><br><span class="line">git push</span><br></pre></td></tr></table></figure><h1 id="十三、添加和删除-Tag"><a href="#十三、添加和删除-Tag" class="headerlink" title="十三、添加和删除 Tag"></a>十三、添加和删除 Tag</h1><p>删除本地和远程 Tag</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git tag -d v1.0.0</span><br><span class="line"></span><br><span class="line">git push origin --delete tag v1.0.0</span><br></pre></td></tr></table></figure><p>重新创建 Tag 并提交推送</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git tag v1.0.0</span><br><span class="line"></span><br><span class="line"># 添加 message</span><br><span class="line">git tag -a v1.0.0 -m &quot;Release v1.0.0&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">git push origin v1.0.0</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术 </tag>
            
            <tag> Git </tag>
            
            <tag> 工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用 Portainer 管理 Docker 容器</title>
      <link href="/2025/02/22/%E4%BD%BF%E7%94%A8Portainer%E7%AE%A1%E7%90%86Docker%E5%AE%B9%E5%99%A8/"/>
      <url>/2025/02/22/%E4%BD%BF%E7%94%A8Portainer%E7%AE%A1%E7%90%86Docker%E5%AE%B9%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="使用-Portainer-管理-Docker-容器"><a href="#使用-Portainer-管理-Docker-容器" class="headerlink" title="使用 Portainer 管理 Docker 容器"></a>使用 Portainer 管理 Docker 容器</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>Portainer 是一个 Docker 可视化管理平台，用于图形化管理容器，镜像，网络和数据卷。</p><h2 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h2><h3 id="1-Web-可视化管理-Docker"><a href="#1-Web-可视化管理-Docker" class="headerlink" title="1. Web 可视化管理 Docker"></a>1. Web 可视化管理 Docker</h3><ul><li>查看&#x2F;启停容器</li><li>拉取镜像</li><li>创建，编辑，删除容器</li><li>查看日志，资源占用</li><li>进入容器 Shell</li></ul><h3 id="2-管理-Docker-Compose"><a href="#2-管理-Docker-Compose" class="headerlink" title="2. 管理 Docker Compose"></a>2. 管理 Docker Compose</h3><ul><li>可直接在 Web 页面中粘贴 docker-compose.yml</li><li>一键部署 &#x2F; 更新 &#x2F; 回滚</li><li>修改环境变量后重新部署</li></ul><h3 id="3-权限与安全"><a href="#3-权限与安全" class="headerlink" title="3. 权限与安全"></a>3. 权限与安全</h3><ul><li>多用户登录</li><li>角色权限控制</li><li>API Token</li></ul><h2 id="安装使用"><a href="#安装使用" class="headerlink" title="安装使用"></a>安装使用</h2><h3 id="1-确认安装-Docker"><a href="#1-确认安装-Docker" class="headerlink" title="1. 确认安装 Docker"></a>1. 确认安装 Docker</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker --version</span><br></pre></td></tr></table></figure><h3 id="2-创建-Portainer-数据卷用于持久化"><a href="#2-创建-Portainer-数据卷用于持久化" class="headerlink" title="2. 创建 Portainer 数据卷用于持久化"></a>2. 创建 Portainer 数据卷用于持久化</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume create portainer_data</span><br></pre></td></tr></table></figure><h3 id="3-启动-Portainer"><a href="#3-启动-Portainer" class="headerlink" title="3. 启动 Portainer"></a>3. 启动 Portainer</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">  --name portainer \</span><br><span class="line">  --restart=always \</span><br><span class="line">  -p 9000:9000 \</span><br><span class="line">  -p 9443:9443 \</span><br><span class="line">  -v /var/run/docker.sock:/var/run/docker.sock \</span><br><span class="line">  -v portainer_data:/data \</span><br><span class="line">  portainer/portainer-ce:latest</span><br></pre></td></tr></table></figure><h3 id="4-访问-Portainer"><a href="#4-访问-Portainer" class="headerlink" title="4. 访问 Portainer"></a>4. 访问 Portainer</h3><p>访问一下地址</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># https</span><br><span class="line">https://&lt;your-host-ip&gt;:9443</span><br><span class="line"></span><br><span class="line"># http</span><br><span class="line">https://&lt;your-host-ip&gt;:9000</span><br></pre></td></tr></table></figure><h3 id="5-首次访问设置"><a href="#5-首次访问设置" class="headerlink" title="5. 首次访问设置"></a>5. 首次访问设置</h3><ul><li>设置管理员密码</li><li>选择 Local Docker</li><li>进入控制台</li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术 </tag>
            
            <tag> 工具 </tag>
            
            <tag> Docker </tag>
            
            <tag> Portainer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker的使用</title>
      <link href="/2025/02/02/Docker%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2025/02/02/Docker%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="一、卸载-Docker"><a href="#一、卸载-Docker" class="headerlink" title="一、卸载 Docker"></a>一、卸载 Docker</h1><p>卸载 <code>docker</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get purge docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin docker-ce-rootless-extras</span><br></pre></td></tr></table></figure><p>执行 <code>sudo apt-get update</code> 时报错无法连接 <code>docker</code> 时可执行此命令解决</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo rm -rf /etc/apt/sources.list.d/docker.list</span><br></pre></td></tr></table></figure><p>删除残留文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo rm -rf /var/lib/apt/lists/*</span><br><span class="line">sudo rm -rf /var/lib/docker</span><br><span class="line">sudo rm -rf /var/lib/containerd</span><br><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure><p>…</p><h1 id="二、安装-Docker"><a href="#二、安装-Docker" class="headerlink" title="二、安装 Docker"></a>二、安装 Docker</h1><p>卸载所有冲突的包</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for pkg in docker.io docker-doc docker-compose docker-compose-v2 podman-docker containerd runc; do sudo apt-get remove $pkg; done</span><br></pre></td></tr></table></figure><p>更新 <code>apt</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure><p>设置秘钥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add -</span><br></pre></td></tr></table></figure><p>增加软件源</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository \</span><br><span class="line">&quot;deb [arch=amd64] https://mirrors.aliyun.com/docker-ce/linux/ubuntu \</span><br><span class="line">$(lsb_release -cs) \</span><br><span class="line">stable&quot;</span><br></pre></td></tr></table></figure><p>安装 <code>docker</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</span><br></pre></td></tr></table></figure><p>将 <code>docker</code> 加入用户组</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo groupadd docker</span><br><span class="line">sudo gpasswd -a $USER docker</span><br><span class="line">newgrp docker</span><br></pre></td></tr></table></figure><p>…</p><h1 id="三、安装-Docker-Compose-插件"><a href="#三、安装-Docker-Compose-插件" class="headerlink" title="三、安装 Docker Compose 插件"></a>三、安装 Docker Compose 插件</h1><p>安装 <code>Docker Compose</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install docker-compose-plugin</span><br></pre></td></tr></table></figure><p>检查安装</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker compose version</span><br></pre></td></tr></table></figure><p>…</p><h1 id="四、Docker-指令"><a href="#四、Docker-指令" class="headerlink" title="四、Docker 指令"></a>四、Docker 指令</h1><h3 id="docker-images"><a href="#docker-images" class="headerlink" title="docker images"></a>docker images</h3><p>查看镜像</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure><h3 id="docker-create"><a href="#docker-create" class="headerlink" title="docker create"></a>docker create</h3><p>创建镜像</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker create -it --name busybox busybox</span><br></pre></td></tr></table></figure><h3 id="docker-rmi"><a href="#docker-rmi" class="headerlink" title="docker rmi"></a>docker rmi</h3><p>删除镜像</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi [OPTIONS] IMAGE [IMAGE...]</span><br></pre></td></tr></table></figure><h3 id="docker-ps"><a href="#docker-ps" class="headerlink" title="docker ps"></a>docker ps</h3><p>查看当前运行的容器</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br></pre></td></tr></table></figure><p>查看所有容器</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -a</span><br></pre></td></tr></table></figure><h3 id="docker-run"><a href="#docker-run" class="headerlink" title="docker run"></a>docker run</h3><p>新建并启动容器</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 80:80 --name my_image nginx</span><br></pre></td></tr></table></figure><p><code>-d</code> 代表在后台执行、</p><p><code>-p</code> 代表将本机的 80 <code>port</code> 转发到 <code>container</code> 中的 80 <code>port</code></p><p><code>--name</code> 设定容器名称</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --rm busybox</span><br></pre></td></tr></table></figure><p><code>--rm</code> 代表退出容器时会自动删除容器</p><p>基于镜像创建容器</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker  run  -itd  --name   containername    image:tag</span><br></pre></td></tr></table></figure><h3 id="docker-start"><a href="#docker-start" class="headerlink" title="docker start"></a>docker start</h3><p>启动容器</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker start [OPTIONS] CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure><h3 id="docker-stop"><a href="#docker-stop" class="headerlink" title="docker stop"></a>docker stop</h3><p>停止容器</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop [OPTIONS] CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure><h3 id="docker-restart"><a href="#docker-restart" class="headerlink" title="docker restart"></a>docker restart</h3><p>重启容器</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker restart [OPTIONS] CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure><h3 id="docker-rm"><a href="#docker-rm" class="headerlink" title="docker rm"></a>docker rm</h3><p>删除容器</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm [OPTIONS] CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure><p><code>--volumes</code> , <code>-v</code> 会删除掉与容器连接的 <code>volume</code></p><h3 id="docker-exec"><a href="#docker-exec" class="headerlink" title="docker exec"></a>docker exec</h3><p>进入容器</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker exec [OPTIONS] CONTAINER COMMAND [ARG...]</span><br><span class="line">docker exec -it &lt;Container ID&gt; bash</span><br></pre></td></tr></table></figure><p>使用 <code>root</code> 进入容器</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker exec -u 0 -it &lt;Container ID&gt; bash</span><br><span class="line">docker exec -u root -it &lt;Container ID&gt; bash</span><br></pre></td></tr></table></figure><p>查看容器的 <code>Linux</code> 版本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/os-release</span><br></pre></td></tr></table></figure><h3 id="docker-inspect"><a href="#docker-inspect" class="headerlink" title="docker inspect"></a>docker inspect</h3><p>查看容器详细资料</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect [OPTIONS] NAME|ID [NAME|ID...]</span><br></pre></td></tr></table></figure><h3 id="docker-logs"><a href="#docker-logs" class="headerlink" title="docker logs"></a>docker logs</h3><p>查看 <code>log</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs [OPTIONS] CONTAINER</span><br></pre></td></tr></table></figure><p><code>--follow</code> , <code>-f</code> , Follow log output</p><p>从最后100行开始追踪</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker logs -f --tail 100 CONTAINER</span><br><span class="line">docker logs -f -n 100 CONTAINER</span><br></pre></td></tr></table></figure><p>可以通过 <code>--since</code> 从指定时间到现在的 <code>log</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs --since 2023-04-13T09:20:00 &lt;container_id&gt;</span><br></pre></td></tr></table></figure><p>从10分钟到现在的 <code>log</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs --since 10m CONTAINER</span><br></pre></td></tr></table></figure><p>1小时前到现在的 <code>log</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs --since 1h CONTAINER</span><br></pre></td></tr></table></figure><p>查看 <code>docker</code> 时间格式</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs -t CONTAINER</span><br></pre></td></tr></table></figure><p>使用 <code>since</code> 或 <code>--until</code> 指定时间段</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs --since 2024-06-24T10:20:30.345678975Z --until 2024-06-24T10:30:30.345678975Z CONTAINER</span><br></pre></td></tr></table></figure><p>将 <code>log</code> 写入文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs CONTAINER &gt;&gt; access.log</span><br></pre></td></tr></table></figure><p>若上述指令没有生效则使用以下指令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs CONTAINER &gt;&amp; access.log</span><br></pre></td></tr></table></figure><p>先过滤 <code>log</code> 再写入文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs CONTAINER | grep &quot;29/Mar/2022&quot; &gt;&gt; access_tmp.log</span><br></pre></td></tr></table></figure><p>若上述指令没有生效则使用以下指令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs CONTAINER 2&gt;&amp;1 | grep &quot;29/Mar/2022&quot; &gt;&amp; access_tmp.log</span><br></pre></td></tr></table></figure><h3 id="docker-stats"><a href="#docker-stats" class="headerlink" title="docker stats"></a>docker stats</h3><p>显示容器资源（CPU, I&#x2F;O ……）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stats [OPTIONS] [CONTAINER...]</span><br></pre></td></tr></table></figure><p>也可加上 <code>--no-stream</code> 禁用统计，只提取第一个结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stats --no-stream</span><br></pre></td></tr></table></figure><h3 id="docker-top"><a href="#docker-top" class="headerlink" title="docker top"></a>docker top</h3><p>查看正在执行的 <code>processes</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker top CONTAINER</span><br></pre></td></tr></table></figure><h3 id="docker-pause"><a href="#docker-pause" class="headerlink" title="docker pause"></a>docker pause</h3><p>指定停止的 <code>CONTAINER</code> 中全部的 <code>processes</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pause CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure><p><code>docker stop</code> : process级别</p><p><code>docker pause</code> : container 级别</p><p>恢复暂停的 <code>CONTAINER</code> 中全部的 process</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker unpause CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure><h3 id="docker-tag"><a href="#docker-tag" class="headerlink" title="docker tag"></a>docker tag</h3><p>修改容器标签</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker tag SOURCE_IMAGE[:TAG] TARGET_IMAGE[:TAG]</span><br></pre></td></tr></table></figure><h3 id="docker-commit"><a href="#docker-commit" class="headerlink" title="docker commit"></a>docker commit</h3><p>将容器打包成镜像</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker commit CONTAINER_NAME IAMGE_NAME:TAG</span><br></pre></td></tr></table></figure><h3 id="docker-save"><a href="#docker-save" class="headerlink" title="docker save"></a>docker save</h3><p>将镜像保存为 <code>tar</code> 文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker save busybox &gt; busybox.tar</span><br></pre></td></tr></table></figure><p>或</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker save --output busybox.tar busybox</span><br></pre></td></tr></table></figure><p>或一次性备份多个</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker save -o images.tar postgres:9.6 busybox</span><br></pre></td></tr></table></figure><h3 id="docker-load"><a href="#docker-load" class="headerlink" title="docker load"></a>docker load</h3><p>导入镜像</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker load &lt; busybox.tar</span><br></pre></td></tr></table></figure><p>或</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker load -i busybox.tar</span><br></pre></td></tr></table></figure><h3 id="docker-history"><a href="#docker-history" class="headerlink" title="docker history"></a>docker history</h3><p>展示镜像的历史，查询镜像的每一层</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker history [OPTIONS] IMAGE</span><br></pre></td></tr></table></figure><p>注意 <code>docker</code> 中层的概念</p><p>另有 &#96;&#96;docker export container<code>以及</code>docker import container&#96;</p><h3 id="docker-image-prune"><a href="#docker-image-prune" class="headerlink" title="docker image prune"></a>docker image prune</h3><p>删除所有的悬空的镜像</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image prune</span><br></pre></td></tr></table></figure><p>移除全部的没有用到的镜像</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image prune -a</span><br></pre></td></tr></table></figure><h3 id="docker-container-prune"><a href="#docker-container-prune" class="headerlink" title="docker container prune"></a>docker container prune</h3><p>移除全部停止的 <code>container</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker container prune</span><br></pre></td></tr></table></figure><h3 id="docker-cp"><a href="#docker-cp" class="headerlink" title="docker cp"></a>docker cp</h3><p>将容器内的文件拷贝到宿主机</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker cp your-container-id(你的容器的id):(容器内的文件路径，如果拷贝整个文件，则直接写/) （本机存放文件的地址）</span><br></pre></td></tr></table></figure><h3 id="docker-volume"><a href="#docker-volume" class="headerlink" title="docker volume"></a>docker volume</h3><p>查看当前的 <code>volume</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume ls [OPTIONS]</span><br></pre></td></tr></table></figure><p>创建一个 <code>volume</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume create [OPTIONS] [VOLUME]</span><br></pre></td></tr></table></figure><p>删除一个 <code>volume</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume rm [OPTIONS] VOLUME [VOLUME...]</span><br></pre></td></tr></table></figure><p>查看 <code>volume</code> 详细资料</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume inspect [OPTIONS] VOLUME [VOLUME...]</span><br></pre></td></tr></table></figure><p>移除未使用的 <code>volume</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume prune [OPTIONS]</span><br></pre></td></tr></table></figure><p>也可建立 <code>readonly</code> 的 <code>volumes</code></p><p><code>docker-compose.yml</code> 方法如下</p><p>查看 <code>Mounts</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect &lt;container ID&gt;</span><br></pre></td></tr></table></figure><p>也可以建立 NFS volumes</p><p><code>docker-compose.yml</code> 方法如下,</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">version: &#x27;3.5&#x27;</span><br><span class="line">services:</span><br><span class="line">  nginx:</span><br><span class="line">    image: nginx</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;80:80&quot;</span><br><span class="line">    volumes:</span><br><span class="line">      - &quot;nfs-data:/data&quot;</span><br><span class="line"></span><br><span class="line">volumes:</span><br><span class="line">    nfs-data:</span><br><span class="line">      driver: local</span><br><span class="line">      driver_opts:</span><br><span class="line">        type: nfs</span><br><span class="line">        o: nfsvers=4,addr=ip,rw</span><br><span class="line">        device: &quot;:/path/to/dir&quot;</span><br></pre></td></tr></table></figure><p>可以用以下指令查看设定</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker volume ls</span><br><span class="line">docker inspect &lt;volume name&gt;</span><br></pre></td></tr></table></figure><h3 id="docker-network"><a href="#docker-network" class="headerlink" title="docker network"></a>docker network</h3><p>查看当前 <code>docker</code> 的网络清单</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network ls [OPTIONS]</span><br></pre></td></tr></table></figure><p>docker 中的网络主要有三种 Bridge、Host、None，默认为 Bridge 模式</p><p>指定 <code>network</code>为 <code>host</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --name busybox --rm --network=host busybox</span><br></pre></td></tr></table></figure><p>建立 <code>network</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network create [OPTIONS] NETWORK</span><br></pre></td></tr></table></figure><p>移除  <code>network</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network rm NETWORK [NETWORK...]</span><br></pre></td></tr></table></figure><p>移除全部未使用的 <code>network</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network prune [OPTIONS]</span><br></pre></td></tr></table></figure><p>查看 <code>network</code> 详细资料</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network inspect [OPTIONS] NETWORK [NETWORK...]</span><br></pre></td></tr></table></figure><p>将 <code>container</code> 连接 <code>network</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network connect [OPTIONS] NETWORK CONTAINER</span><br></pre></td></tr></table></figure><p>断开连接</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network disconnect [OPTIONS] NETWORK CONTAINER</span><br></pre></td></tr></table></figure><h3 id="docker-compose"><a href="#docker-compose" class="headerlink" title="docker compose"></a>docker compose</h3><p>查看目前容器</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose ps</span><br></pre></td></tr></table></figure><p>加上 <code>-q</code> ，只显示 id</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose ps -q</span><br></pre></td></tr></table></figure><p>启动 <code>service</code> 的 <code>container</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose start  [SERVICE...]</span><br></pre></td></tr></table></figure><p>停止<code>service</code> 的 <code>container</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose stop [options] [SERVICE...]</span><br></pre></td></tr></table></figure><p>重启<code>service</code> 的 <code>container</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose restart [options] [SERVICE...]</span><br></pre></td></tr></table></figure><p>构建</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up [options] [--scale SERVICE=NUM...] [SERVICE...]</span><br></pre></td></tr></table></figure><p>加 <code>-d</code>，在后台启动</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure><p>若有很多个<code>docker-compose.yml</code> <code>docker-compose-dev.yml</code>,可以通过 <code>-f</code> 决定你要执行哪一个</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose -f ./docker-compose-dev.yml up -d</span><br></pre></td></tr></table></figure><p>每次构建时重构镜像</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d --build</span><br></pre></td></tr></table></figure><p>删除构建</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose down [options]</span><br></pre></td></tr></table></figure><p>加 <code>-v</code> 可顺便将 <code>volume</code> 移除</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose down -v</span><br></pre></td></tr></table></figure><p>在指定的 Service 中执行一个指令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker-compose run [options] [-v VOLUME...] [-p PORT...] [-e KEY=VAL...] SERVICE [COMMAND] [ARGS...]</span><br><span class="line">[ARGS...]</span><br></pre></td></tr></table></figure><p>在 web Service 中執行 <code>bash</code> 指令</p><p>可參考 <a href="https://docs.docker.com/compose/reference/run/">https://docs.docker.com/compose/reference/run/</a></p><p>觀看 Service logs</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose logs [options] [SERVICE...]</span><br></pre></td></tr></table></figure><p>檢查 <code>docker-compose.yml</code> 格式是否正確</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose config</span><br></pre></td></tr></table></figure><p>如下指令，和 <code>docker exec</code> 一樣</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose exec</span><br></pre></td></tr></table></figure><p>範例 ( 進入 web 這個 service 的 bash )</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose exec web bash</span><br></pre></td></tr></table></figure><p>顯示被使用到的 container 中的 images 清單</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose images</span><br></pre></td></tr></table></figure><p>移除 service containers</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose rm</span><br></pre></td></tr></table></figure><p>Pushes images 到 docker hub</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose push</span><br></pre></td></tr></table></figure><h3 id="docker-registry"><a href="#docker-registry" class="headerlink" title="docker registry"></a>docker registry</h3><p>登入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker login</span><br></pre></td></tr></table></figure><p>跑一个 <code>busybox</code> 容器</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it busybox</span><br></pre></td></tr></table></figure><p>在里面新增一些文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;text&#x27; &gt; data.txt</span><br></pre></td></tr></table></figure><p>打开另外一个终端，查看容器ID，将容器变为镜像</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br><span class="line">docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]</span><br></pre></td></tr></table></figure><p>推送上去</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push twtrubiks/my_busybox</span><br></pre></td></tr></table></figure><h1 id="五、多容器操作"><a href="#五、多容器操作" class="headerlink" title="五、多容器操作"></a>五、多容器操作</h1><p>重启&#x2F;停止&#x2F;删除所有容器</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker restart/stop/rm (三个不同命令) $(docker ps -aq)</span><br></pre></td></tr></table></figure><p>删除所有镜像</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi $(docker images -q)</span><br></pre></td></tr></table></figure><h1 id="六、删除全部-container-的-logs"><a href="#六、删除全部-container-的-logs" class="headerlink" title="六、删除全部 container 的 logs"></a>六、删除全部 container 的 logs</h1><p>docker 的 log 路径：&#x2F;var&#x2F;lib&#x2F;docker&#x2F;containers</p><p>在上述路径下执行以下命令查看 log 文件大小</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">du -sh *</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">truncate -s 0 /var/lib/docker/containers/*/*-json.log</span><br></pre></td></tr></table></figure><p>清除某一个container 的 logs </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">truncate -s 0 $(docker inspect --format=&#x27;&#123;&#123;.LogPath&#125;&#125;&#x27; &lt;container_name_or_id&gt;)</span><br></pre></td></tr></table></figure><h1 id="七、JSON-File-logging-driver"><a href="#七、JSON-File-logging-driver" class="headerlink" title="七、JSON File logging driver"></a>七、JSON File logging driver</h1><p>通过设定限制 log 的大小</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">logging:</span><br><span class="line">  driver: &quot;json-file&quot;</span><br><span class="line">  options:</span><br><span class="line">    max-file: &quot;1&quot;    # default 是 1</span><br><span class="line">    max-size: &quot;200m&quot; # default 是 -1, 也就是没有限制</span><br></pre></td></tr></table></figure><p>设定完重启 docker-compose ，用以下指令查看是否生效</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect --format &#x27;&#123;&#123;.HostConfig.LogConfig&#125;&#125;&#x27; CONTAINER</span><br></pre></td></tr></table></figure><h1 id="八、Health-Check"><a href="#八、Health-Check" class="headerlink" title="八、Health Check"></a>八、Health Check</h1><p>查看以下 <code>docker-compose.yml</code>文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">version: &#x27;3.5&#x27;</span><br><span class="line">services:</span><br><span class="line">  web:</span><br><span class="line">    image: odoo:17.0</span><br><span class="line">    depends_on:</span><br><span class="line">      db:</span><br><span class="line">        condition: service_healthy</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;8069:8069&quot;</span><br><span class="line">    healthcheck:</span><br><span class="line">      test: curl -fs http://localhost:8069/web/database/selector || exit 1</span><br><span class="line">      interval: 10s</span><br><span class="line">      timeout: 5s</span><br><span class="line">      retries: 5</span><br><span class="line">    volumes:</span><br><span class="line">      - odoo-web-data:/var/lib/odoo</span><br><span class="line">      - ./config:/etc/odoo</span><br><span class="line"></span><br><span class="line">  db:</span><br><span class="line">    image: postgres:16</span><br><span class="line">    environment:</span><br><span class="line">      - POSTGRES_DB=postgres</span><br><span class="line">      - POSTGRES_USER=odoo</span><br><span class="line">      - POSTGRES_PASSWORD=odoo</span><br><span class="line">      - PGDATA=/var/lib/postgresql/data/pgdata</span><br><span class="line">    healthcheck:</span><br><span class="line">      test: [&quot;CMD-SHELL&quot;, &quot;pg_isready -U odoo&quot;]</span><br><span class="line">      interval: 10s</span><br><span class="line">      timeout: 5s</span><br><span class="line">      retries: 5</span><br><span class="line">    volumes:</span><br><span class="line">      - odoo-db-data:/var/lib/postgresql/data/pgdata</span><br><span class="line"></span><br><span class="line">volumes:</span><br><span class="line">    odoo-web-data:</span><br><span class="line">    odoo-db-data:</span><br></pre></td></tr></table></figure><p>执行时发现多了一列 <code>health: starting</code> ，来代表 container 的状态</p><ul><li>healthy </li><li>unhealthy</li><li>starting</li></ul><h1 id="九、配置镜像源加速"><a href="#九、配置镜像源加速" class="headerlink" title="九、配置镜像源加速"></a>九、配置镜像源加速</h1><p>编辑 &#x2F;etc&#x2F;docker&#x2F;daemon.json 文件，在其中 register 字段增加 url</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [</span><br><span class="line">    &quot;https://docker.1panel.live&quot;,</span><br><span class="line">    &quot;https://docker.1ms.run&quot;,</span><br><span class="line">    &quot;https://dytt.online&quot;,</span><br><span class="line">    &quot;https://docker-0.unsee.tech&quot;,</span><br><span class="line">    &quot;https://lispy.org&quot;,</span><br><span class="line">    &quot;https://docker.xiaogenban1993.com&quot;,</span><br><span class="line">    &quot;https://666860.xyz&quot;,</span><br><span class="line">    &quot;https://hub.rat.dev&quot;,</span><br><span class="line">    &quot;https://docker.m.daocloud.io&quot;,</span><br><span class="line">    &quot;https://demo.52013120.xyz&quot;,</span><br><span class="line">    &quot;https://proxy.vvvv.ee&quot;,</span><br><span class="line">    &quot;https://registry.cyou&quot;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>重载 daemon 文件，重启 docker 服务</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure><h1 id="十、清除镜像缓存"><a href="#十、清除镜像缓存" class="headerlink" title="十、清除镜像缓存"></a>十、清除镜像缓存</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker builder prune</span><br></pre></td></tr></table></figure><h1 id="十一、重命名镜像名称"><a href="#十一、重命名镜像名称" class="headerlink" title="十一、重命名镜像名称"></a>十一、重命名镜像名称</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker tag &lt;旧镜像名&gt;:&lt;旧标签&gt; &lt;新镜像名&gt;:&lt;新标签&gt;</span><br></pre></td></tr></table></figure><h1 id="十二、使用-Dockerfile-构建镜像"><a href="#十二、使用-Dockerfile-构建镜像" class="headerlink" title="十二、使用 Dockerfile 构建镜像"></a>十二、使用 Dockerfile 构建镜像</h1><p>编辑 Dockerfile 文件</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> mcr.microsoft.com/dotnet/sdk:<span class="number">10.0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /Backend</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> . ./</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> dotnet tool install --global dotnet-ef --version 10.*</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ENV</span> PATH=<span class="string">&quot;$PATH:/root/.dotnet/tools&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;bash&quot;</span>]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>执行构建命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t image_name:tag .</span><br></pre></td></tr></table></figure><h1 id="十三、使用-Docker-管理-volume-卷"><a href="#十三、使用-Docker-管理-volume-卷" class="headerlink" title="十三、使用 Docker 管理 volume 卷"></a>十三、使用 Docker 管理 volume 卷</h1><p>获取容器信息，打印出的信息中 Mounts 即为挂载卷的信息，其中包含挂载卷的路径</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect container_name</span><br></pre></td></tr></table></figure><p>删除挂载卷的数据</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume rm volume_name</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术 </tag>
            
            <tag> 工具 </tag>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginx安装与使用</title>
      <link href="/2025/01/17/Nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"/>
      <url>/2025/01/17/Nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h1><h2 id="安装-Nginx"><a href="#安装-Nginx" class="headerlink" title="安装 Nginx"></a>安装 Nginx</h2><p>Ubuntu&#x2F;Debian</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install nginx -y</span><br></pre></td></tr></table></figure><h2 id="开机自启"><a href="#开机自启" class="headerlink" title="开机自启"></a>开机自启</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start nginx</span><br><span class="line">sudo systemctl enable nginx</span><br><span class="line">sudo systemctl status nginx  # 检查是否运行正常</span><br></pre></td></tr></table></figure><h2 id="配置反向代理"><a href="#配置反向代理" class="headerlink" title="配置反向代理"></a>配置反向代理</h2><ol><li>打开配置目录</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/nginx/sites-available/  # Ubuntu</span><br></pre></td></tr></table></figure><ol start="2"><li>创建配置文件，如 hexo.conf</li></ol><ul><li>静态站点使用以下配置</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name www.example.com;</span><br><span class="line"></span><br><span class="line">    root /home/projects/ZHexoBlog/public;</span><br><span class="line">    index index.html;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        try_files $uri $uri/ /index.html;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    access_log /var/log/nginx/hexo.access.log;</span><br><span class="line">    error_log /var/log/nginx/hexo.error.log;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>动态服务使用以下配置</li></ul><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> www.example.com;</span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://10.0.0.2:4000;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-Proto <span class="variable">$scheme</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>保存并启用</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ln -s /etc/nginx/sites-available/hexo.conf /etc/nginx/sites-enabled/</span><br></pre></td></tr></table></figure><ol start="4"><li>测试 Nginx 配置</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx -t</span><br></pre></td></tr></table></figure><p>如果显示以下内容即可重启</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /etc/nginx/nginx.conf test is successful</span><br></pre></td></tr></table></figure><ol start="5"><li>重启 Nginx</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart nginx</span><br></pre></td></tr></table></figure><h2 id="使用-HTTPS"><a href="#使用-HTTPS" class="headerlink" title="使用 HTTPS"></a>使用 HTTPS</h2><p>如果你有域名，建议使用 <strong>Let’s Encrypt</strong> 获取免费 SSL：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install certbot python3-certbot-nginx -y</span><br><span class="line">sudo certbot --nginx -d www.example.com</span><br></pre></td></tr></table></figure><h2 id="静态站点代理"><a href="#静态站点代理" class="headerlink" title="静态站点代理"></a>静态站点代理</h2><p>最终配置文件如下，注意使用certbot python3-certbot-nginx生成的配置文件中要修改 if 部分为下面配置文件部分，否则无法正常访问</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    server_name www.example.com;</span><br><span class="line"></span><br><span class="line">    root /home/projects/ZHexoBlog/public;</span><br><span class="line">    index index.html;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        try_files $uri $uri/ /index.html;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    access_log /var/log/nginx/hexo.access.log;</span><br><span class="line">    error_log /var/log/nginx/hexo.error.log;</span><br><span class="line"></span><br><span class="line">    listen 443 ssl; # managed by Certbot</span><br><span class="line">    ssl_certificate /etc/letsencrypt/live/www.example.com/fullchain.pem; # managed by Certbot</span><br><span class="line">    ssl_certificate_key /etc/letsencrypt/live/www.example.com/privkey.pem; # managed by Certbot</span><br><span class="line">    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot</span><br><span class="line">    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name www.example.com;</span><br><span class="line"></span><br><span class="line">    return 301 https://$host$request_uri;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="云服务器中配置"><a href="#云服务器中配置" class="headerlink" title="云服务器中配置"></a>云服务器中配置</h2><p>关键：云服务器中需要放行 <code>80 端口</code> 和 <code>443 端口</code></p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术 </tag>
            
            <tag> 工具 </tag>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用 Hexo 搭建博客网站的过程</title>
      <link href="/2024/12/12/%E4%BD%BF%E7%94%A8-Hexo-%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99%E7%9A%84%E8%BF%87%E7%A8%8B/"/>
      <url>/2024/12/12/%E4%BD%BF%E7%94%A8-Hexo-%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99%E7%9A%84%E8%BF%87%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>相比于完全自己开发博客网站项目，Hexo 为博客网站的实现提供了现成的，完善的解决方案，能够让想要搭建个人博客网站的人们专注于博客内容本身，而不是专注于开发和维护博客网站项目。Hexo 搭建速度快，简单易用，功能全面，而且可以由 Github Pages 托管，实现自动化部署，也无需自己去申请域名，租云服务器解决公网 IP 的问题，是搭建个人博客网站理想的工具。   </p><h1 id="项目搭建"><a href="#项目搭建" class="headerlink" title="项目搭建"></a>项目搭建</h1><h2 id="安装环境"><a href="#安装环境" class="headerlink" title="安装环境"></a>安装环境</h2><h3 id="1-安装-Git"><a href="#1-安装-Git" class="headerlink" title="1. 安装 Git"></a>1. 安装 Git</h3><ul><li><p>Windows</p><ul><li>下载并安装 <a href="https://git-scm.com/install/windows">Git</a></li></ul></li><li><p>Linux（Ubuntu, Debian）<br>使用以下命令</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install git-core</span><br></pre></td></tr></table></figure><h3 id="2-安装-Node-js"><a href="#2-安装-Node-js" class="headerlink" title="2. 安装 Node.js"></a>2. 安装 Node.js</h3><ul><li><a href="https://nodejs.org/zh-cn/download/">Nodejs</a></li></ul><h3 id="3-安装-Hexo"><a href="#3-安装-Hexo" class="headerlink" title="3. 安装 Hexo"></a>3. 安装 Hexo</h3><p>在 node 环境下使用 npm 安装 Hexo 命令行工具</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><p>也可以使用 npm 局部安装 hexo 包</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo</span><br></pre></td></tr></table></figure><p>安装 Hexo 时需要注意 hexo 与 node 的版本兼容性，具体参阅 Hexo 官方提供的 <a href="https://hexo.io/zh-cn/docs/">Nodejs 版本限制文档</a></p><h2 id="创建并运行-Hexo-项目"><a href="#创建并运行-Hexo-项目" class="headerlink" title="创建并运行 Hexo 项目"></a>创建并运行 Hexo 项目</h2><p>Hexo 环境安装完成后，使用以下命令创建 Hexo 项目</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo init &lt;project-name&gt;</span><br><span class="line">cd &lt;project-name&gt;</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure><p>使用以下命令运行 Hexo 项目，等待程序运行起来后，浏览器访问 <a href="http://localhost:4000/">http://localhost:4000</a> 即可看到默认项目的页面</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo server</span><br></pre></td></tr></table></figure><h2 id="项目配置"><a href="#项目配置" class="headerlink" title="项目配置"></a>项目配置</h2><p>hexo 项目配置基本都在创建项目中的 <code>_config.yml</code> 中进行更改<br>具体配置方法请参阅 <a href="https://hexo.io/zh-cn/docs/configuration">官方配置文档</a></p><h2 id="常用的命令"><a href="#常用的命令" class="headerlink" title="常用的命令"></a>常用的命令</h2><ul><li>创建博客</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new post &lt;post-name&gt;</span><br></pre></td></tr></table></figure><ul><li>创建页面</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page &lt;page-name&gt;</span><br></pre></td></tr></table></figure><ul><li>创建草稿</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new draft &lt;draft-name&gt;</span><br></pre></td></tr></table></figure><ul><li>发布草稿</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo publish &lt;draft-name&gt;</span><br></pre></td></tr></table></figure><ul><li>生成静态文件</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo generate</span><br></pre></td></tr></table></figure><ul><li>清除静态文件</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br></pre></td></tr></table></figure><ul><li>启动服务器</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo server</span><br></pre></td></tr></table></figure><ul><li>部署站点</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo deploy</span><br></pre></td></tr></table></figure><h2 id="安装主题"><a href="#安装主题" class="headerlink" title="安装主题"></a>安装主题</h2><p>Hexo 有很多主题可供选择，其中有许多主题是由社区贡献的，可以访问 Hexo 官方网站的 <a href="https://hexo.io/themes/">主题页面</a>   </p><p>以下方法以 <a href="https://butterfly.js.org/">Butterfly</a> 为例</p><h3 id="1-安装主题"><a href="#1-安装主题" class="headerlink" title="1. 安装主题"></a>1. 安装主题</h3><ul><li>通过 git 直接克隆主题仓库</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/butterfly</span><br></pre></td></tr></table></figure><ul><li>也可以通过 npm 安装主题的依赖</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-theme-butterfly</span><br></pre></td></tr></table></figure><h3 id="2-安装主题依赖"><a href="#2-安装主题依赖" class="headerlink" title="2. 安装主题依赖"></a>2. 安装主题依赖</h3><p>安装渲染器等依赖</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-renderer-pug hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure><p>如果需要搜索功能需要安装以下依赖</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-search</span><br></pre></td></tr></table></figure><h3 id="3-修改配置文件"><a href="#3-修改配置文件" class="headerlink" title="3. 修改配置文件"></a>3. 修改配置文件</h3><p>安装主题之后并没有立即生效，需要修改 hexo 项目中的配置文件 <code>_config.yml</code> 中的 <code>theme</code> 字段</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">theme: butterfly</span><br></pre></td></tr></table></figure><p>将主题包中的 <code>_config.yml</code> 配置文件重命名为 <code>_config.butterfly.yml</code> 的形式，并将该配置文件放在与 hexo 项目配置文件 <code>_config.yml</code> 相同的项目根目录下，这样可以防止更改主题导致主题配置文件丢失，方便维护。</p><p>有关主题的配置都在 <code>_config.butterfly.yml</code> 中进行配置，具体配置项的说明参阅主题 <a href="https://butterfly.js.org/posts/4aa8abbe/">butterfly 配置文档</a></p><h3 id="4-其他问题"><a href="#4-其他问题" class="headerlink" title="4. 其他问题"></a>4. 其他问题</h3><p>在使用 Butterfly 主题时，会发现项目的分类页面（categories）和标签（tags）页面无法访问，需要进行以下操作。</p><ol><li>创建 categories 与 tags 的页面</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo new page categories</span><br><span class="line">hexo new page tags</span><br></pre></td></tr></table></figure><ol start="2"><li><p>手动添加页面的类型   </p><p> 创建 categories 与 tags 的页面后，会自动生成 <code>~/source/categories/index.md</code> 和 <code>~/source/tags/index.md</code>   </p><p> 在 <code>~/source/categories/index.md</code> 添加 <code>type: &quot;categories&quot;</code><br> 在 <code>~/source/tags/index.md</code> 添加 <code>type: &quot;tags&quot;</code><br> 经过以上操作，在添加有标签和分类的 Post 后，分类页面和标签页面会显示正常。</p></li></ol><h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><p>可以将项目部署到 Github 或 GitLab 具体请参阅 <a href="https://hexo.io/zh-cn/docs/github-pages">部署方法</a></p><p>执行以下代码将项目的静态文件部署</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo generate</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术 </tag>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>第一篇博客</title>
      <link href="/2024/12/08/%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2/"/>
      <url>/2024/12/08/%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2/</url>
      
        <content type="html"><![CDATA[<p>我关注个人博客网站已经有差不多半年时间了，刚开始了是从 <a href="https://bf.zzxworld.com/">BlogFinder</a> 了解到个人博客网站的相关内容，觉得能有一个属于自己的博客网站是一件很酷的事情，可以完全按照自己的想法来设计和建造属于自己的博客网站，不会受到那些大的内容平台的种种限制。   </p><p>当然更为重要的是，可以将自己的所见所想以文字的形式记录下来。我越发觉得现在所处的互联网环境虽然信息非常丰富，但是不知不觉中，有很大一部分时间是被动地接收信息，甚至成为一种习惯，很少能够将自己地思考和想法表达出来，所以我决定搭建一个自己的博客网站。   </p><p>起初我使用 Flask 和 Vue 从 0 开始，搭建了一个我的个人博客网站项目，觉得这是独属于自己的数字空间，所以代码一定要由自己写才足够的酷。我的博客网站项目前后开发大概花了 3 周的时间，当项目部署上线后，每次打开博客项目时，首先想到的是如何优化代码，让博客网站项目的功能有更好的实现，更好的视觉效果，前前后后折腾了很久，博客却很少去写。我的博客网站项目也逐渐变成了一个练习项目，背离了最初记录自己所见所想的初衷，后来博客项目也尘封在代码库中，很久没有维护了。   </p><p>后来我意识到，我做个人博客网站的初衷是记录自己的所见所想，而不是去写一个博客网站的项目。其实已经有很多优秀博客网站实现的开源项目，比如 Hexo，WordPress 等等，完全可以去使用现有的项目实现搭建自己的个人博客网站，这样就可以完全专注于记录自己的所见所想了，于是也有了现在我的个人博客网站。   </p><p>这是我全新博客网站中的第一篇博客，谨以此篇，记录一下建站时的思考和想法，也希望我能够养成写博客的习惯，能够主动的思考和写作，同时留下一些文字的回忆。</p>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 生活 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
